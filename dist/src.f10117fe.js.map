{"version":3,"sources":["node_modules/zrender/lib/core/env.js","node_modules/zrender/lib/core/platform.js","node_modules/zrender/lib/core/util.js","node_modules/zrender/node_modules/tslib/tslib.es6.js","node_modules/zrender/lib/core/vector.js","node_modules/zrender/lib/mixin/Draggable.js","node_modules/zrender/lib/core/Eventful.js","node_modules/zrender/lib/core/fourPointsTransform.js","node_modules/zrender/lib/core/dom.js","node_modules/zrender/lib/core/event.js","node_modules/zrender/lib/core/GestureMgr.js","node_modules/zrender/lib/Handler.js","node_modules/zrender/lib/core/timsort.js","node_modules/zrender/lib/graphic/constants.js","node_modules/zrender/lib/Storage.js","node_modules/zrender/lib/animation/requestAnimationFrame.js","node_modules/zrender/lib/animation/easing.js","node_modules/zrender/lib/core/curve.js","node_modules/zrender/lib/animation/cubicEasing.js","node_modules/zrender/lib/animation/Clip.js","node_modules/zrender/lib/core/LRU.js","node_modules/zrender/lib/tool/color.js","../../.config/yarn/global/node_modules/base64-js/index.js","../../.config/yarn/global/node_modules/ieee754/index.js","../../.config/yarn/global/node_modules/isarray/index.js","../../.config/yarn/global/node_modules/buffer/index.js","node_modules/zrender/lib/svg/helper.js","node_modules/zrender/lib/animation/Animator.js","node_modules/zrender/lib/animation/Animation.js","node_modules/zrender/lib/dom/HandlerProxy.js","node_modules/zrender/lib/config.js","node_modules/zrender/lib/core/matrix.js","node_modules/zrender/lib/core/Transformable.js","node_modules/zrender/lib/core/Point.js","node_modules/zrender/lib/core/BoundingRect.js","node_modules/zrender/lib/contain/text.js","node_modules/zrender/lib/Element.js","node_modules/zrender/lib/graphic/Group.js","node_modules/zrender/lib/zrender.js","node_modules/zrender/lib/graphic/Displayable.js","node_modules/zrender/lib/core/bbox.js","node_modules/zrender/lib/core/PathProxy.js","node_modules/zrender/lib/contain/line.js","node_modules/zrender/lib/contain/cubic.js","node_modules/zrender/lib/contain/quadratic.js","node_modules/zrender/lib/contain/util.js","node_modules/zrender/lib/contain/arc.js","node_modules/zrender/lib/contain/windingLine.js","node_modules/zrender/lib/contain/path.js","node_modules/zrender/lib/graphic/Path.js","node_modules/zrender/lib/tool/transformPath.js","node_modules/zrender/lib/tool/path.js","node_modules/zrender/lib/graphic/Image.js","node_modules/zrender/lib/graphic/shape/Circle.js","node_modules/zrender/lib/graphic/helper/roundRect.js","node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","node_modules/zrender/lib/graphic/shape/Rect.js","node_modules/zrender/lib/graphic/shape/Ellipse.js","node_modules/zrender/lib/graphic/shape/Line.js","node_modules/zrender/lib/graphic/helper/smoothBezier.js","node_modules/zrender/lib/graphic/helper/poly.js","node_modules/zrender/lib/graphic/shape/Polygon.js","node_modules/zrender/lib/graphic/shape/Polyline.js","node_modules/zrender/lib/graphic/Gradient.js","node_modules/zrender/lib/graphic/LinearGradient.js","node_modules/zrender/lib/graphic/RadialGradient.js","node_modules/zrender/lib/graphic/TSpan.js","node_modules/zrender/lib/tool/parseXML.js","node_modules/zrender/lib/tool/parseSVG.js","node_modules/zrender/lib/graphic/helper/roundSector.js","node_modules/zrender/lib/graphic/shape/Sector.js","node_modules/zrender/lib/tool/convertPath.js","node_modules/zrender/lib/tool/dividePath.js","node_modules/zrender/lib/tool/morphPath.js","node_modules/zrender/lib/graphic/CompoundPath.js","node_modules/zrender/lib/graphic/IncrementalDisplayable.js","node_modules/zrender/lib/graphic/helper/image.js","node_modules/zrender/lib/graphic/helper/parseText.js","node_modules/zrender/lib/graphic/Text.js","node_modules/zrender/lib/graphic/shape/Arc.js","node_modules/zrender/lib/graphic/shape/BezierCurve.js","node_modules/zrender/lib/graphic/shape/Droplet.js","node_modules/zrender/lib/graphic/shape/Heart.js","node_modules/zrender/lib/graphic/shape/Isogon.js","node_modules/zrender/lib/graphic/shape/Ring.js","node_modules/zrender/lib/graphic/shape/Rose.js","node_modules/zrender/lib/graphic/shape/Star.js","node_modules/zrender/lib/graphic/shape/Trochoid.js","node_modules/zrender/lib/graphic/Pattern.js","node_modules/zrender/lib/core/OrientedBoundingRect.js","node_modules/zrender/lib/debug/showDebugDirtyRect.js","node_modules/zrender/lib/export.js","node_modules/zrender/lib/canvas/helper.js","node_modules/zrender/lib/canvas/dashStyle.js","node_modules/zrender/lib/canvas/graphic.js","node_modules/zrender/lib/canvas/Layer.js","node_modules/zrender/lib/canvas/Painter.js","node_modules/zrender/lib/svg/SVGPathRebuilder.js","node_modules/zrender/lib/svg/mapStyleToAttrs.js","node_modules/zrender/lib/svg/core.js","node_modules/zrender/lib/svg/cssAnimation.js","node_modules/zrender/lib/svg/graphic.js","node_modules/zrender/lib/svg/domapi.js","node_modules/zrender/lib/svg/patch.js","node_modules/zrender/lib/svg/Painter.js","node_modules/zrender/lib/all.js","node_modules/zrender/index.js","src/index.ts","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Browser","firefox","ie","edge","newEdge","weChat","Env","browser","node","wxa","worker","svgSupported","touchEventsSupported","pointerEventsSupported","domSupported","transformSupported","transform3dSupported","hasGlobalWindow","window","env","wx","getSystemInfoSync","document","self","navigator","detect","userAgent","ua","match","test","version","split","SVGRect","style","documentElement","WebKitCSSMatrix","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","map","JSON","i","length","char","String","fromCharCode","size","charCodeAt","DEFAULT_TEXT_WIDTH_MAP","platformApi","createCanvas","createElement","measureText","_ctx","_cachedFont","text","font","canvas","getContext","res","exec","fontSize","width","indexOf","preCalcWidth","loadImage","src","onload","onerror","image","Image","setPlatformAPI","newPlatformApis","key","BUILTIN_OBJECT","reduce","obj","val","TYPED_ARRAY","objToString","Object","prototype","toString","arrayProto","Array","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","ctorFunction","constructor","protoFunction","protoKey","idStart","guid","logError","args","_i","arguments","console","error","apply","clone","source","result","typeStr","call","isPrimitive","len","Ctor","from","isDom","hasOwnProperty","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keysArr","keys","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","data","each","arr","cb","context","push","memo","find","bindPolyfill","func","concat","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","nodeType","ownerDocument","isGradientObject","colorStops","isImagePatternObject","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","concatArray","a","b","newArray","offset","createObject","proto","properties","create","StyleCtor","disableUserSelect","dom","domStyle","webkitUserSelect","userSelect","webkitTapHighlightColor","hasOwn","own","noop","RADIAN_TO_DEGREE","Math","PI","extendStatics","d","setPrototypeOf","__proto__","p","__extends","TypeError","__","__assign","t","s","n","__rest","e","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","rejected","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","pop","__createBinding","o","m","k","k2","undefined","enumerable","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","j","jl","__spreadArray","to","pack","l","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__setModuleDefault","__importStar","mod","__esModule","__importDefault","default","__classPrivateFieldGet","receiver","state","kind","has","__classPrivateFieldSet","x","copy","out","add","v1","v2","scaleAndAdd","sub","sqrt","lenSquare","lengthSquare","mul","div","dot","scale","normalize","distance","dist","distanceSquare","distSquare","negate","lerp","applyTransform","min","max","Param","topTarget","Draggable","handler","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","parent","__hostTarget","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","Eventful","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","h","wrap","ctx","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","isSilent","eventName","off","eventType","newList","trigger","argLen","hItem","afterTrigger","triggerWithContext","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","round","subRowMask","subRowStart","sum","colLocalIdx","colTag","buildTransformer","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","el","inverse","getBoundingClientRect","isCanvasEl","saved","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","idxLR","idxTB","cssText","join","appendChild","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","left","top","offsetLeft","offsetTop","nodeName","toUpperCase","MOUSE_EVENT_REG","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","layerX","zrX","zrY","layerY","ex","clientX","ey","clientY","box","getNativeEvent","normalizeEvent","isTouch","wheelDelta","getWheelDeltaMayPolyfill","zrDelta","detail","touch","targetTouches","changedTouches","button","which","rawWheelDelta","deltaX","deltaY","delta","abs","sign","addEventListener","name","opt","removeEventListener","stop","preventDefault","stopPropagation","cancelBubble","isMiddleOrRightButtonOnMouseUpDown","GestureMgr","_track","recognize","root","_doTrack","_recognize","clear","touches","trackItem","points","pos","eventUtil","recognizers","gestureInfo","pointPair","center","pinch","tracks","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","SILENT","makeEventPacket","eveType","targetInfo","gestureEvent","zrByTouch","stopEvent","eventTool","EmptyProxy","_super","_this","dispose","setCursor","HoveredResult","handlerNames","Handler","storage","painter","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","util","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","__zr","hovered","hoveredTarget","cursor","mouseout","eventControl","zrEventControl","resize","dispatch","eventArgs","setCursorStyle","cursorStyle","silent","eventKey","eventPacket","eachOtherLayer","layer","exclude","list","getDisplayList","hoverCheckResult","ignore","isHover","processGesture","stage","_gestureMgr","gestureMgr","_downEl","_downPoint","_upEl","vec2","displayable","rectHover","ignoreClip","clipPath","getClipPath","contain","hostEl","handlerInstance","getWidth","getHeight","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","DEFAULT_TMP_STORAGE_LENGTH","minRunLength","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","pivot","right","mid","gallopLeft","hint","lastOffset","maxOffset","tmp","gallopRight","TimSort","minGallop","tmpStorageLength","stackLength","runStart","runLength","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","mergeLow","mergeHigh","cursor1","cursor2","_minGallop","count1","count2","exit","customCursor","customDest","sort","remaining","ts","minRun","force","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","zlevel","z","z2","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","traverse","update","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","clipPaths","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","updateTransform","childrenRef","children","child","__dirty","disp","__clipPaths","isNaN","decalEl","getDecalElement","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","idx","delAllRoots","getRoots","requestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","mathPow","mathSqrt","EPSILON","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p0","p1","p2","p3","onet","cubicDerivativeAt","cubicRootAt","A","B","C","t1","disc","K","t2","discSqrt","Y1","Y2","T","theta","acos","ASqrt","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x1","y1","x2","y2","x3","y3","interval","Infinity","prev","d1","d2","_t","cubicLength","iteration","px","py","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","regexp","createCubicEasingFunc","cubicEasingStr","cubic","a_1","b_1","c_1","d_1","roots_1","Clip","opts","_inited","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","onframe","ondestroy","onrestart","easing","setEasing","globalTime","deltaTime","elapsedTime","percent","easingFunc","schedule","remainder","pause","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","remove","LRU","maxSize","_list","_maxSize","_map","put","removed","_lastRemovedEntry","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssAngle","clampCssFloat","parseCssInt","charAt","parseFloat","parseInt","parseCssFloat","cssHueToRgb","m1","m2","lerpNumber","setRgba","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","toLowerCase","strLen","iv","ep","fname","substr","params","alpha","hsla2rgba","hsla","rgba","rgba2hsla","R","G","vMin","vMax","L","H","S","deltaR","deltaG","deltaB","lift","color","level","colorArr","stringify","toHex","fastLerp","normalizedValue","colors","leftIndex","floor","rightIndex","ceil","leftColor","rightColor","dv","fastMapToColor","fullOutput","mapToColor","modifyHSL","modifyAlpha","arrColor","lum","backgroundLum","random","mathRound","normalizeColor","opacity","transform","round3","round4","round1","getMatrixStr","TEXT_ALIGN_TO_ANCHOR","middle","adjustTextY","lineHeight","textBaseline","hasShadow","shadowBlur","shadowOffsetX","shadowOffsetY","getShadowKey","globalScale","getGlobalScale","shadowColor","toFixed","getClipPathsKey","id","isImagePattern","isSVGPattern","svgElement","isPattern","isLinearGradient","isRadialGradient","isGradient","getIdURL","getPathPrecision","getSRTTransformString","rotation","scaleX","scaleY","skewX","skewY","encodeBase64","btoa","unescape","Buffer","arraySlice","interpolateNumber","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillColorStops","val0","val1","len0","len1","shorterArr","shorterLen","last","fillArray","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","cloneValue","ret","rgba2String","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","rawValue","arrayDim","colorArray","parsedGradient","colorStop","kf","prepare","maxTime","additiveTrack","kfs","kfsLen","lastKf","isDiscrete","lastValue","startValue","additiveValue","isAdditive","valueKey","kfsNum","isValueColor","frameIdx","lastFrame","mathMin","frame","nextFrame","w","targetArr","_additiveValue","nextVal_1","isLinearGradient_1","nextColorStop","global","_addToTarget","Animator","allowDiscreteAnimation","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getLoop","getTarget","changeTarget","when","props","whenWithKeys","propNames","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","duration","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","animation","abortedList","_abortedCbs","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","clip","stillHasAdditiveAnimator","onframeList","_onframeCbs","addClip","forwardToLast","during","aborted","getClip","getTracks","stopTracks","allAborted","saveTo","trackKeys","firstOrLast","__changeFinalValue","finalProps","getTime","Date","Animation","_running","_time","_pauseStart","_head","_tail","addAnimator","animator","removeAnimator","notTriggerFrameAndStageUpdate","nextClip","finished","_startLoop","animate","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","zrUtil","nm","mouse","pointer","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","touching","touchTimer","clearTimeout","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","domBelongToZr","parentNode","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","element","toElement","relatedTarget","__pointerCapturing","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","dpr","devicePixelRatio","screen","deviceXDPI","logicalXDPI","debugMode","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","identity","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","invert","mIdentity","matrix","scaleTmp","tmpTransform","originTransform","Transformable","getLocalTransform","setPosition","setScale","setSkew","setOrigin","originX","originY","needLocalTransform","parentTransform","_resolveGlobalScaleRatio","globalScaleRatio","relX","relY","sx","sy","invTransform","getComputedTransform","transformNode","ancestors","setLocalTransform","atan2","shearX","decomposeTransform","ox","oy","transformCoordToLocal","vector","transformCoordToGlobal","getLineScale","copyTransform","ax","anchorX","ay","anchorY","tan","initDefaultProps","TRANSFORMABLE_PROPS","Point","other","equal","scalar","toArray","fromArray","input","mathMax","lt","rb","lb","rt","minTv","maxTv","BoundingRect","height","union","calculateTransform","intersect","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d0","d3","plain","isZero","tx","ty","maxX","maxY","textWidthCache","cacheOfFont","innerGetBoundingRect","textAlign","getLineHeight","adjustTextX","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","lastIndexOf","calculateTextPosition","textPosition","position","halfHeight","textVerticalAlign","align","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","animators","currentStates","states","_init","attr","markRedraw","updateInnerText","forceUpdate","_textContent","textConfig","local","innerTransformable","textStyleChanged","innerOrigin","layoutRect","textOrigin","origin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","isDarkMode","backgroundColor","getBackgroundColor","isDark","attrKV","setTextConfig","setTextContent","setClipPath","extra","hide","show","keyOrObj","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","fromStateTransition","__fromStateTransition","targetName","_savePrimaryToNormal","primaryKeys","hasState","getState","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","animationCfg","stateTransition","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","textContent","_textGuide","_updateAnimationTargets","useStates","stateObjects","notChange","stateObj","lastStateObj","mergedState","_mergeStates","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","_transitionState","_attachComponent","componentEl","zr","addSelfToZr","_detachComponent","removeSelfFromZr","_clipPath","removeClipPath","previousTextContent","removeTextContent","cfg","removeTextConfig","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","updateDuringAnimation","wakeUp","stopAnimation","leftAnimators","animateTo","animationProps","animateFrom","getPaintRect","elProto","isGroup","logs","logDeprecatedError","xKey","yKey","createLegacyProperty","privateKey","enhanceArray","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","is2DArray","copyValue","sourceArr","isValueSame","val2","is1DArraySame","topKey","animateObj","targetKeys","additive","setToFinal","animateAll","existsAnimators","animationKeys","innerKey","targetVal","keyLen","revertedSource","reversedTarget","sourceClone","Group","_children","childAt","childOfName","childCount","_doAdd","addBefore","nextSibling","oldChild","newChild","replaceAt","index","old","removeAll","eachChild","stopped","includeChildren","tmpRect","tmpMat","invisible","childRect","painterCtors","instances","delInstance","totalLum","ZRender","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","useDirtyRect","ssrMode","ssr","ssrOnly","handerProxy","HandlerProxy","getViewportRoot","_flush","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","end","setSleepAfterStill","stillFramesCount","getType","clearAnimation","eventHandler","init","disposeAll","getInstance","registerPainter","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","useStyle","beforeBrush","afterBrush","innerBeforeBrush","innerAfterBrush","shouldBePainted","viewWidth","viewHeight","considerClipPath","considerAncestors","culling","isDisplayableCulled","isZeroArea","parent_1","rectContain","coord","_paintRect","elRect","shadowSize","tolerance","dirtyRectTolerance","setPrevPaintRect","paintRect","_prevPaintRect","getPrevPaintRect","animateStyle","targetKey","setStyle","notRedraw","_rect","styleChanged","styleUpdated","createStyle","__hoverStyle","isStyleObject","_mergeStyle","targetStyle","sourceStyle","changedKeys","getAnimationStyleProps","statesKeys","mergedStyle","dispProto","incremental","viewRect","mathSin","mathCos","PI2","extremity","fromPoints","bottom","fromLine","xDim","yDim","fromCubic","curve","fromQuadratic","fromArc","rx","ry","startAngle","endAngle","anticlockwise","vec2Min","vec2Max","diff","angle","CMD","M","Q","Z","tmpOutX","tmpOutY","min2","max2","mathAbs","hasTypedArray","Float32Array","tmpAngles","modPI2","radian","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","_xi","_yi","_x0","_y0","_saveData","increaseVersion","_version","getVersion","segmentIgnoreThreshold","_ux","_uy","setDPR","setContext","beginPath","reset","_pathSegLen","_pathLen","moveTo","_drawPendingPt","addData","lineTo","exceedUnit","_pendingPtDist","_pendingPtX","_pendingPtY","bezierCurveTo","quadraticCurveTo","arc","cx","cy","arcTo","radius","closePath","toStatic","setData","appendPath","path","appendSize","appendPathData","cmd","_expandData","newData","Number","MAX_VALUE","xi","yi","isFirst","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","rebuildPath","drawPart","accumLength","displayedLength","pendingPtDist","pendingPtX","pendingPtY","psi","isEllipse","breakBuild","ellipse","newProxy","containStroke","lineWidth","_l","_a","_b","_s","normalizeRadian","windingLine","dir","x_","isAroundEqual","swapExtrema","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","dTheta","tmp_1","containPath","isStroke","line","quadratic","pathProxy","DEFAULT_PATH_STYLE","strokePercent","fillOpacity","strokeOpacity","lineDashOffset","lineCap","miterLimit","strokeNoScale","strokeFirst","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","decal","_decalEl","buildPath","shape","decalElStyle","getDefaultShape","defaultStyle","getDefaultStyle","hasFill","pathFill","fillLum","isDarkLabel","shapeCfg","inBatch","pathUpdated","getUpdatedPathProxy","createPathProxy","hasStroke","needsUpdateRect","firstInvoke","rectStroke","_rectStroke","lineScale","strokeContainThreshold","localPos","pathContain","dirtyShape","animateShape","setShape","shapeChanged","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","pathProto","subPixelOptimize","autoBatch","mathAtan2","transformPath","nPoint","p_1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","cpx","cpy","subpathX","subpathY","prevCmd","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","pathData","SVGPath","isPathProxy","createPathOptions","innerOpts","createFromString","extendFromString","defaultOpts","mergePath","pathEls","pathList","pathEl","pathBundle","clonePath","sourcePath","bakeTransform","toLocal","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","sWidth","sHeight","isImageLike","ZRImage","_getSize","dim","imageSource","__image","otherDim","otherDimSize","CircleShape","Circle","r1","r2","r3","r4","total","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","roundRectHelper","EllipseShape","Ellipse","LineShape","Line","pointAt","smoothBezier","smooth","isLoop","constraint","cps","prevPoint","nextPoint","point","cp0","cp1","controlPoints","smoothConstraint","cp2","PolygonShape","Polygon","polyHelper","PolylineShape","Polyline","Gradient","addColorStop","LinearGradient","globalCoord","RadialGradient","DEFAULT_TSPAN_STYLE","TSpan","setBoundingRect","tspanProto","parseXML","svg","parser","DOMParser","parseFromString","svgNode","firstChild","nodeParsers","INHERITABLE_STYLE_ATTRIBUTES_MAP","INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS","SELF_STYLE_ATTRIBUTES_MAP","SELF_STYLE_ATTRIBUTES_MAP_KEYS","SVGParser","_defs","_root","xml","_defsUsePending","named","viewBox","getAttribute","parseAttributes","_parseNode","applyDefs","viewBoxRect","viewBoxTransform","viewBoxArr","splitNumberSequence","makeViewBoxTransform","ignoreViewBox","elRoot","ignoreRootClip","xmlNode","parentGroup","namedFrom","isInDefs","isInText","namedFromForSub","parser_1","nameAttr","newNamed","svgNodeTagLower","paintServerParsers","def","_parseText","_textX","_textY","inheritStyle","applyTextAlignment","textStyle","fontFamily","fontStyle","fontWeight","internalField","circle","pointsStr","pointsArr","parsePoints","polygon","polyline","img","gradient","parsePaintServerUnit","parseGradientColorStops","gradientUnits","toLocaleLowerCase","offsetStr","styleVals","parseInlineStyle","stopColor","__inheritedStyle","pointsString","defsUsePending","onlyInlineStyle","isTextGroup","inheritedStyle","selfStyle","parseTransformAttribute","parseAttributeStyle","getFillStrokeStyle","__selfStyle","lineDash","visibility","display","parentSelfStyle","zrTextBaseline","parentInheritedStyle","zrTextAlign","urlRegex","method","urlMatch","url","defs","item","rawStr","transformRegex","DEGREE_TO_ANGLE","transformOps_1","mt","valueArr","styleRegex","inheritableStyleResult","selfStyleResult","styleRegResult","svgStlAttr","zrInheritableStlAttr","zrSelfStlAttr","svgAttrName","attrValue","boundingRect","parseSVG","mathACos","mathATan2","dx10","dy10","dx32","dy32","computeCornerTangents","cr","clockwise","x01","y01","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","normalizeCornerRadius","innerRadius","r0","hasRadius","hasInnerRadius","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","halfRd","it_1","crStart","crEnd","ct0","ct1","SectorShape","Sector","roundSectorHelper","aroundEqual","pathToBezierCurves","bezierArrayGroups","currentSubpath","createNewSubpath","addLine","addArc","c1","s1","c2","s2","x4","y4","hx","hy","nextAngle","adpativeBezier","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","d1Sqr","d2Sqr","tmpSegX","tmpSegY","pathToPolygons","polygons","beziers","getDividingGrids","dimSize","rowDim","count","rowSize","columnSize","ratio","rowCount","columnCount","grids","currentCount","remained","divideSector","sectorShape","outShapes","arcLen","isAngleRow","row","column","newShape","divideRect","rectShape","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","b1a1x","b1a1y","projPtOnLine","pt","lineA","lineB","dir2","addToPoly","poly","splitPolygonByLine","intersections","intersectionPt","projPt","splitPt0","splitPt1","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","binaryDividePolygon","polygonShape","pt0","pt1","binaryDivideRecursive","paths","copyPathProps","polygonConvert","OutShapeCtor","polygonCount","totalArea_1","items","area","selfCount","subPath","alignSubpath","subpath1","subpath2","shorterPath","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastX","lastY","alignBezierCurves","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","score","newArr","findBestMorphingRotation","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","i_1","isCombineMorphing","__isCombineMorphing","isMorphing","__morphT","SAVED_METHOD_PREFIX","saveAndModifyMethod","methodName","modifiers","savedMethodName","originalMethod","after","before","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","updateIdentityTransform","morphingData","newCp","x0_1","y0_1","morphPath","animationOpts","oldDone","oldDuring","restoreToPath","hilbert","minX","minY","bits","sortPaths","xMin","yMin","xMax","yMax","cp","defaultDividePath","param","createEmptyReturn","fromIndividuals","toIndividuals","combineMorph","fromList","fromPathList","addFromPath","separateCount","dividePath","toSubPathList","individualDelay","identityTransform","addToSubPathListToZr","toLen","animating_1","eachDone","indivdualAnimationOpts","separateMorph","toPathList","fromLen","CompoundPath","_updatePathDirty","dirtyPath","IncrementalDisplayable","notClear","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","Displayble","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","image_1","imageOnLoad","__cachedImgObj","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","subLength","estimateLength","charCode","parsePlainText","overflow","padding","truncate","calculatedLineHeight","bgColorDrawn","truncateLineOverflow","lineOverflow","lines","wrapText","contentHeight","lineCount","truncateMinChar","outerHeight","outerWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","contentBlock","topWidth","topHeight","wrapInfo","accumWidth","breakAll","matchedIndex","pushTokens","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","outer","token","tokenStyle","styleName","rich","textPadding","paddingH","tokenHeight","innerHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","textBackgroundColor","bgImg","imageHelper","remainTruncWidth","block","isEmptyStr","newLine","strLines","linesWidths","tokenPadding","tokenPaddingH","outerWidth_1","isLineHolder","tokensLen","isLatin","ch","code","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderWidth","borderRadius","ZRText","_defaultStyle","_updateSubTexts","_childCursor","normalizeTextStyle","_updateRichTexts","_updatePlainTexts","defaultTextStyle","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","getStyleText","needDrawBg","needDrawBackground","baseX","baseY","textX","textY","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","fixedBoundingRect","subElStyle","setSeparateFont","xLeft","lineTop","xRight","tokenCount","remainedWidth","lineXLeft","lineXRight","_placeToken","parentBgColorDrawn","textWidth","textHeight","topStyle","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","rectEl","imgEl","rectStyle","imgStyle","borderDash","borderDashOffset","commonStyle","makeFont","hasSeparateFont","parseFontSize","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","FONT_PARTS","fontProp","normalizeStyle","ArcShape","Arc","unitX","unitY","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","tangentAt","DropletShape","Droplet","HeartShape","Heart","IsogonShape","Isogon","dStep","deg","RingShape","Ring","RoseShape","Rose","StarShape","Star","xStart","yStart","ri","TrochoidShape","location","Trochoid","num","Pattern","repeat","extent","extent2","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","proj","proj_1","DebugRect","className","border","autoHideDelay","_hideTimeout","showDebugDirtyRect","getLayers","isSingleCanvas","debugViewRoot","debugRects","computedStyle","getComputedStyle","idx_1","eachBuiltinLayer","debugGetPaintRects","paintRects","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","isClipPathChanged","prevClipPaths","parseInt10","getSize","whIdx","wh","cwh","plt","prb","defaultView","normalizeLineDash","lineType","getLineDash","lineScale_1","rawVal","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","originalGlobalAlpha","globalAlpha","doStrokePath","createCanvasPattern","pattern","canvasPattern","createPattern","DOMMatrix","setTransform","translateSelf","rotateSelf","scaleSelf","brushPath","strokePart","firstDraw","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","fillStyle","strokeStyle","setLineDash","needsRebuild","brushImage","aspect","drawImage","brushText","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","flushPathDrawn","globalCompositeOperation","bindPathAndTextCommonStyle","prevEl","getStyle","newLineWidth","bindImageStyle","setContextTransform","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","brushSingle","brush","isLast","__isRendered","prevElClipPaths","forceSetTransform","forceSetStyle","restore","save","canBatchPath","lastDrawType","brushIncremental","temporalDisplayables","innerScope","len_1","createDom","newDom","newDomStyle","setAttribute","Layer","motionBlur","lastFrameAlpha","virtual","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","onselectstart","margin","getElementCount","initContext","setUnpainted","createBackBuffer","domBack","ctxBack","createRepaintRects","prevList","mergedRepaintRects","full","pendingRect","addRectToMergePool","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","prevRect","curRect","hasIntersections","_paintRects","clearAll","clearColor","repaintRects","haveMotionBLur","doClear","clearRect","clearColorGradientOrPattern","__canvasGradient","__painter","fillRect","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","__builtin__","createRoot","domRoot","CanvasPainter","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","_opts","_singleCanvas","rootStyle","innerHTML","zlevelList","layers","_width","_height","_domRoot","rootCanvas","mainLayer","getViewportRootOffset","viewportRoot","paintAll","_redrawId","_paintList","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","self_1","eachLayer","layerList","zi","_loop_1","this_1","useTimer","now","startTime","firstEl","repaint","repaintRect","_doPaintEl","dTime","draw","currentLayer","insertLayer","layersMap","prevLayer","prevDom","insertBefore","updatePrevLayer","incrementalLayerCount","prevZlevel","_clearLayer","layerConfig","_zlevel","delLayer","removeChild","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","degree","SVGPathRebuilder","precision","_start","_d","_str","_p","_add","dThetaPositive","isCircle","unifiedTheta","large","xRot","dTheta_1","vals","generateStr","getStr","NONE","pathHasFill","pathHasStroke","strokeProps","svgStrokeProps","mapStyleToAttrs","updateAttr","strokeScale","strokeWidth","SVGNS","XLINKNS","XMLNS","XML_NAMESPACE","createElementNS","createVNode","tag","attrs","createElementOpen","attrsStr","part","createElementClose","vNodeToString","newline","convertElToString","getCssString","selectorNodes","animationNodes","bracketBegin","bracketEnd","selectors","attrName","animations","animationName","createBrushScope","zrId","shadowCache","patternCache","gradientCache","clipPathCache","cssNodes","cssAnims","cssClassIdx","cssAnimIdx","shadowIdx","gradientIdx","patternIdx","clipPathIdx","createSVGVNode","useViewBox","EASING_MAP","transformOriginKey","buildPathString","kfShape","svgPathBuilder","setTransformOrigin","ANIMATE_STYLE_MAP","addAnimation","cssAnim","createCompoundPathCSSAnimation","composedAnim","cssAnimationCfg","cssAnimationName","subScope","createCSSAnimation","animNames","lastAnim","getEasingFunc","onlyShape","cssAnimations","groupAnimators","cfgArr","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","kfEasing","timingFunction","canAnimateShape","newLen","percents","allTransformOriginSame","transformOrigin","isCanvasLike","toDataURL","setStyleAttrs","isFillStroke","setGradient","setPattern","setShadow","noRotateScale","noTranslate","compress","convertPolyShape","strArr","validatePolyShape","createAttrsConvert","normalizedDesc","buitinShapesDef","hasShapeAnimation","brushSVGPath","builtinShpDef","svgElType","willUpdate","pathVersion","elExt","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","brushSVGImage","dw","dh","href","brushSVGTSpan","separatedFontStr","shadowKey","shadowId","blur_1","stdDx","stdDy","stdDeviation","gradientTag","gradientAttrs","stopsAttrs","gradientVNode","gradientKey","gradientId","patternAttrs","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","errMsg","setSizeToVNode_1","vNode","svgEl","elm","createdImage","patternVNode","svgWidth","svgHeight","patternTransform","patternKey","patternId","clipPathId","clipPathAttrs","createTextNode","createComment","newNode","referenceNode","tagName","isElement","isText","isComment","colonChar","xChar","emptyNode","isUndef","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","isSameTag","createElm","vnode","updateAttrs","api","addVnodes","parentElm","vnodes","startIdx","removeVnodes","oldVnode","oldAttrs","cur","removeAttribute","setAttributeNS","updateChildren","oldCh","newCh","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInOld","elmToMove","patchVnode","patch","parent_2","svgId","SVGPainter","createMethodNotSupport","_id","_oldVNode","viewport","_viewport","svgDom","_svgDom","getSvgDom","renderToVNode","renderOneToVNode","bgColor","_bgVNode","mainVNode","_mainVNode","animationCssStr","styleNode","renderToString","cssAnimation","bgVNode","getSvgRoot","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","currentClipPathGroup","clipGroupNodeIdx","prevLen","lca","i_2","groupAttrs","viewportStyle","base64","encodeURIComponent","prefix","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","getBaseURL","exports","bundle","require","updateLink","link","newLink","cloneNode","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","createErrorOverlay","getElementById","stackTrace","innerText","getParents","modules","parents","dep","Function","deps","cache","some"],"mappings":"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AAb,GAAwB,GAA/B;AACH;;AACM,SAASgD,GAAT,CAAarB,KAAb,EAAoBsB,aAApB,EAAmC;AACtC,MAAInxB,GAAG,GAAGouB,KAAK,CAACyB,KAAD,CAAf;AACA,SAAO7vB,GAAG,GACJ,CAAC,QAAQA,GAAG,CAAC,CAAD,CAAX,GAAiB,QAAQA,GAAG,CAAC,CAAD,CAA5B,GAAkC,QAAQA,GAAG,CAAC,CAAD,CAA9C,IAAqDA,GAAG,CAAC,CAAD,CAAxD,GAA8D,GAA9D,GACI,CAAC,IAAIA,GAAG,CAAC,CAAD,CAAR,IAAemxB,aAFf,GAGJ,CAHN;AAIH;;AACM,SAASC,MAAT,GAAkB;AACrB,SAAOpB,SAAS,CAAC,CACb5rB,IAAI,CAACwM,KAAL,CAAWxM,IAAI,CAACgtB,MAAL,KAAgB,GAA3B,CADa,EAEbhtB,IAAI,CAACwM,KAAL,CAAWxM,IAAI,CAACgtB,MAAL,KAAgB,GAA3B,CAFa,EAGbhtB,IAAI,CAACwM,KAAL,CAAWxM,IAAI,CAACgtB,MAAL,KAAgB,GAA3B,CAHa,CAAD,EAIb,KAJa,CAAhB;AAKH;;ACrZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;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","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["var Browser = (function () {\n    function Browser() {\n        this.firefox = false;\n        this.ie = false;\n        this.edge = false;\n        this.newEdge = false;\n        this.weChat = false;\n    }\n    return Browser;\n}());\nvar Env = (function () {\n    function Env() {\n        this.browser = new Browser();\n        this.node = false;\n        this.wxa = false;\n        this.worker = false;\n        this.svgSupported = false;\n        this.touchEventsSupported = false;\n        this.pointerEventsSupported = false;\n        this.domSupported = false;\n        this.transformSupported = false;\n        this.transform3dSupported = false;\n        this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n    return Env;\n}());\nvar env = new Env();\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n}\nelse if (typeof navigator === 'undefined') {\n    env.node = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\nfunction detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/)\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = (/micromessenger/i).test(ua);\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n    if (weChat) {\n        browser.weChat = true;\n    }\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    env.domSupported = typeof document !== 'undefined';\n    var style = document.documentElement.style;\n    env.transform3dSupported = ((browser.ie && 'transition' in style)\n        || browser.edge\n        || (('WebKitCSSMatrix' in window) && ('m11' in new WebKitCSSMatrix()))\n        || 'MozPerspective' in style)\n        && !('OTransition' in style);\n    env.transformSupported = env.transform3dSupported\n        || (browser.ie && +browser.version >= 9);\n}\nexport default env;\n","export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\nfunction getTextWidthMap(mapStr) {\n    var map = {};\n    if (typeof JSON === 'undefined') {\n        return map;\n    }\n    for (var i = 0; i < mapStr.length; i++) {\n        var char = String.fromCharCode(i + 32);\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n        map[char] = size;\n    }\n    return map;\n}\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n    createCanvas: function () {\n        return typeof document !== 'undefined'\n            && document.createElement('canvas');\n    },\n    measureText: (function () {\n        var _ctx;\n        var _cachedFont;\n        return function (text, font) {\n            if (!_ctx) {\n                var canvas = platformApi.createCanvas();\n                _ctx = canvas && canvas.getContext('2d');\n            }\n            if (_ctx) {\n                if (_cachedFont !== font) {\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\n                }\n                return _ctx.measureText(text);\n            }\n            else {\n                text = text || '';\n                font = font || DEFAULT_FONT;\n                var res = /^([0-9]*?)px$/.exec(font);\n                var fontSize = +(res && res[1]) || DEFAULT_FONT_SIZE;\n                var width = 0;\n                if (font.indexOf('mono') >= 0) {\n                    width = fontSize * text.length;\n                }\n                else {\n                    for (var i = 0; i < text.length; i++) {\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\n                    }\n                }\n                return { width: width };\n            }\n        };\n    })(),\n    loadImage: function (src, onload, onerror) {\n        var image = new Image();\n        image.onload = onload;\n        image.onerror = onerror;\n        image.src = src;\n        return image;\n    }\n};\nexport function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n        if (newPlatformApis[key]) {\n            platformApi[key] = newPlatformApis[key];\n        }\n    }\n}\n","import { platformApi } from './platform.js';\nvar BUILTIN_OBJECT = reduce([\n    'Function',\n    'RegExp',\n    'Date',\n    'Error',\n    'CanvasGradient',\n    'CanvasPattern',\n    'Image',\n    'Canvas'\n], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n}, {});\nvar TYPED_ARRAY = reduce([\n    'Int8',\n    'Uint8',\n    'Uint8Clamped',\n    'Int16',\n    'Uint16',\n    'Int32',\n    'Uint32',\n    'Float32',\n    'Float64'\n], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n}, {});\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar ctorFunction = function () { }.constructor;\nvar protoFunction = ctorFunction ? ctorFunction.prototype : null;\nvar protoKey = '__proto__';\nvar idStart = 0x0907;\nexport function guid() {\n    return idStart++;\n}\nexport function logError() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\nexport function clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n    var result = source;\n    var typeStr = objToString.call(source);\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (Ctor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = source[i];\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n    return result;\n}\nexport function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)) {\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n    return target;\n}\nexport function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\nexport function extend(target, source) {\n    if (Object.assign) {\n        Object.assign(target, source);\n    }\n    else {\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexport function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n    for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n        if ((overlay ? source[key] != null : target[key] == null)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport var createCanvas = platformApi.createCanvas;\nexport function indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() { }\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n    for (var prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\nexport function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    if (Object.getOwnPropertyNames) {\n        var keyList = Object.getOwnPropertyNames(source);\n        for (var i = 0; i < keyList.length; i++) {\n            var key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? source[key] != null : target[key] == null)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\nexport function isArrayLike(data) {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\nexport function each(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if (arr.forEach && arr.forEach === nativeForEach) {\n        arr.forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            cb.call(context, arr[i], i, arr);\n        }\n    }\n    else {\n        for (var key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, arr[key], key, arr);\n            }\n        }\n    }\n}\nexport function map(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\nexport function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\nexport function filter(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\nexport function find(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\nexport function keys(obj) {\n    if (!obj) {\n        return [];\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keyList = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key);\n        }\n    }\n    return keyList;\n}\nfunction bindPolyfill(func, context) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport var bind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\nfunction curry(func) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport { curry };\nexport function isArray(value) {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\nexport function isFunction(value) {\n    return typeof value === 'function';\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\nexport function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\nexport function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\nexport function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\nexport function isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\nexport function isGradientObject(value) {\n    return value.colorStops != null;\n}\nexport function isImagePatternObject(value) {\n    return value.image != null;\n}\nexport function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n}\nexport function eqNaN(value) {\n    return value !== value;\n}\nexport function retrieve() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\nexport function retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\nexport function retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n            ? value1\n            : value2;\n}\nexport function slice(arr) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return nativeSlice.apply(arr, args);\n}\nexport function normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\nvar primitiveKey = '__ec_primitive__';\nexport function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\nexport function isPrimitive(obj) {\n    return obj[primitiveKey];\n}\nvar HashMap = (function () {\n    function HashMap(obj) {\n        this.data = {};\n        var isArr = isArray(obj);\n        this.data = {};\n        var thisMap = this;\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n        function visit(value, key) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n    HashMap.prototype.get = function (key) {\n        return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    };\n    HashMap.prototype.set = function (key, value) {\n        return (this.data[key] = value);\n    };\n    HashMap.prototype.each = function (cb, context) {\n        for (var key in this.data) {\n            if (this.data.hasOwnProperty(key)) {\n                cb.call(context, this.data[key], key);\n            }\n        }\n    };\n    HashMap.prototype.keys = function () {\n        return keys(this.data);\n    };\n    HashMap.prototype.removeKey = function (key) {\n        delete this.data[key];\n    };\n    return HashMap;\n}());\nexport { HashMap };\nexport function createHashMap(obj) {\n    return new HashMap(obj);\n}\nexport function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (var i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\nexport function createObject(proto, properties) {\n    var obj;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        var StyleCtor = function () { };\n        StyleCtor.prototype = proto;\n        obj = new StyleCtor();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n    return obj;\n}\nexport function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n}\nexport function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n}\nexport function noop() { }\nexport var RADIAN_TO_DEGREE = 180 / Math.PI;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n","var LN2 = Math.log(2);\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n    if (rank === 1) {\n        var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n    var subRowMask = rowMask | (1 << rowStart);\n    var subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n    var sum = 0;\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        var colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n    detCache[cacheKey] = sum;\n    return sum;\n}\nexport function buildTransformer(src, dest) {\n    var mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        return;\n    }\n    var vh = [];\n    for (var i = 0; i < 8; i++) {\n        for (var j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n    return function (out, srcPointX, srcPointY) {\n        var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","import env from './env.js';\nimport { buildTransformer } from './fourPointsTransform.js';\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\nexport function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\nexport function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n        var markers = prepareCoordMarkers(el, saved);\n        var transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\nfunction prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n    for (var i = 0; i < 4; i++) {\n        var marker = document.createElement('div');\n        var stl = marker.style;\n        var idxLR = i % 2;\n        var idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n    return markers;\n}\nfunction preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n    for (var i = 0; i < 4; i++) {\n        var rect = markers[i].getBoundingClientRect();\n        var ii = 2 * i;\n        var x = rect.left;\n        var y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords));\n}\nexport function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\n","import Eventful from './Eventful.js';\nimport env from './env.js';\nimport { isCanvasEl, transformCoordWithViewport } from './dom.js';\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\nvar firefoxNotSupportOffsetXY = env.browser.firefox\n    && +env.browser.version.split('.')[0] < 39;\nexport function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n    if (calculate) {\n        calculateZrXY(el, e, out);\n    }\n    else if (firefoxNotSupportOffsetXY\n        && e.layerX != null\n        && e.layerX !== e.offsetX) {\n        out.zrX = e.layerX;\n        out.zrY = e.layerY;\n    }\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n    }\n    else {\n        calculateZrXY(el, e, out);\n    }\n    return out;\n}\nfunction calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n        var ex = e.clientX;\n        var ey = e.clientY;\n        if (isCanvasEl(el)) {\n            var box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\nexport function getNativeEvent(e) {\n    return e\n        || window.event;\n}\nexport function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n    if (e.zrX != null) {\n        return e;\n    }\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        var wheelDelta = getWheelDeltaMayPolyfill(e);\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        var touch = eventType !== 'touchend'\n            ? e.targetTouches[0]\n            : e.changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n    var button = e.button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    return e;\n}\nfunction getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n            : deltaX > 0 ? -1\n                : 1;\n    return 3 * delta * sign;\n}\nexport function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n}\nexport function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n}\nexport var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n};\nexport function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n}\nexport { Eventful as Dispatcher };\n","import * as eventUtil from './event.js';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        for (var i = list.length - 1; i >= 0; i--) {\n            var hoverCheckResult = void 0;\n            if (list[i] !== exclude\n                && !list[i].ignore\n                && (hoverCheckResult = isHover(list[i], x, y))) {\n                !out.topTarget && (out.topTarget = list[i]);\n                if (hoverCheckResult !== SILENT) {\n                    out.target = list[i];\n                    break;\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n                if (el.silent) {\n                    isSilent = true;\n                }\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","var DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\nfunction minRunLength(n) {\n    var r = 0;\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n    return n + r;\n}\nfunction makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n    if (runHi === hi) {\n        return 1;\n    }\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n        reverseRun(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n    return runHi - lo;\n}\nfunction reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n        start++;\n    }\n    for (; start < hi; start++) {\n        var pivot = array[start];\n        var left = lo;\n        var right = start;\n        var mid;\n        while (left < right) {\n            mid = left + right >>> 1;\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n        var n = start - left;\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n            case 2:\n                array[left + 2] = array[left + 1];\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n        array[left] = pivot;\n    }\n}\nfunction gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\nfunction gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n    return offset;\n}\nfunction TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var length = 0;\n    var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n    var stackLength = 0;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    length = array.length;\n    if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n        tmpStorageLength = length >>> 1;\n    }\n    var tmp = [];\n    stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n    runStart = [];\n    runLength = [];\n    function pushRun(_runStart, _runLength) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n            mergeAt(n);\n        }\n    }\n    function mergeAt(i) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n        runLength[i] = length1 + length2;\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n        stackSize--;\n        var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n        if (length1 === 0) {\n            return;\n        }\n        length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n        if (length2 === 0) {\n            return;\n        }\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n    function mergeLow(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = array[cursor2++];\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n                count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        minGallop < 1 && (minGallop = 1);\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n    function mergeHigh(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n            return;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n            return;\n        }\n        var _minGallop = minGallop;\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = tmp[cursor2--];\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n                count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = array[cursor1--];\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n    return {\n        mergeRuns: mergeRuns,\n        forceMergeRuns: forceMergeRuns,\n        pushRun: pushRun\n    };\n}\nexport default function sort(array, compare, lo, hi) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n    var remaining = hi - lo;\n    if (remaining < 2) {\n        return;\n    }\n    var runLength = 0;\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n    do {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n            binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n    ts.forceMergeRuns();\n}\n","export var REDRAW_BIT = 1;\nexport var STYLE_CHANGED_BIT = 2;\nexport var SHAPE_CHANGED_BIT = 4;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import { create as v2Create, distSquare as v2DistSquare } from './vector.js';\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3;\nvar _v0 = v2Create();\nvar _v1 = v2Create();\nvar _v2 = v2Create();\nfunction isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n}\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nexport function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1)\n        + t * t * (t * p3 + 3 * onet * p2);\n}\nexport function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\n        + (p3 - p2) * t * t);\n}\nexport function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n    if (isAroundZero(A) && isAroundZero(B)) {\n        if (isAroundZero(b)) {\n            roots[0] = 0;\n        }\n        else {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = B * B - 4 * A * C;\n        if (isAroundZero(disc)) {\n            var K = B / A;\n            var t1 = -b / a + K;\n            var t2 = -K / 2;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n            var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n            if (Y1 < 0) {\n                Y1 = -mathPow(-Y1, ONE_THIRD);\n            }\n            else {\n                Y1 = mathPow(Y1, ONE_THIRD);\n            }\n            if (Y2 < 0) {\n                Y2 = -mathPow(-Y2, ONE_THIRD);\n            }\n            else {\n                Y2 = mathPow(Y2, ONE_THIRD);\n            }\n            var t1 = (-b - (Y1 + Y2)) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else {\n            var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n            var theta = Math.acos(T) / 3;\n            var ASqrt = mathSqrt(A);\n            var tmp = Math.cos(theta);\n            var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n            var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n            var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n            if (t3 >= 0 && t3 <= 1) {\n                roots[n++] = t3;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            extrema[0] = -b / (2 * a);\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extrema[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n}\nexport function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n        _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n        d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        prev = t - interval;\n        next = t + interval;\n        _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n        _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n        d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = cubicAt(x0, x1, x2, x3, next);\n            _v2[1] = cubicAt(y0, y1, y2, y3, next);\n            d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = cubicAt(x0, x1, x2, x3, t);\n        out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n    return mathSqrt(d);\n}\nexport function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = cubicAt(x0, x1, x2, x3, t);\n        var y = cubicAt(y0, y1, y2, y3, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\nexport function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\nexport function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\nexport function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            var t1 = -b / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n    if (divider === 0) {\n        return 0.5;\n    }\n    else {\n        return (p0 - p1) / divider;\n    }\n}\nexport function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n}\nexport function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = quadraticAt(x0, x1, x2, _t);\n        _v1[1] = quadraticAt(y0, y1, y2, _t);\n        var d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        _v1[0] = quadraticAt(x0, x1, x2, prev);\n        _v1[1] = quadraticAt(y0, y1, y2, prev);\n        var d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = quadraticAt(x0, x1, x2, next);\n            _v2[1] = quadraticAt(y0, y1, y2, next);\n            var d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = quadraticAt(x0, x1, x2, t);\n        out[1] = quadraticAt(y0, y1, y2, t);\n    }\n    return mathSqrt(d);\n}\nexport function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = quadraticAt(x0, x1, x2, t);\n        var y = quadraticAt(y0, y1, y2, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","var Entry = (function () {\n    function Entry(val) {\n        this.value = val;\n    }\n    return Entry;\n}());\nexport { Entry };\nvar LinkedList = (function () {\n    function LinkedList() {\n        this._len = 0;\n    }\n    LinkedList.prototype.insert = function (val) {\n        var entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    };\n    LinkedList.prototype.insertEntry = function (entry) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    };\n    LinkedList.prototype.remove = function (entry) {\n        var prev = entry.prev;\n        var next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    };\n    LinkedList.prototype.len = function () {\n        return this._len;\n    };\n    LinkedList.prototype.clear = function () {\n        this.head = this.tail = null;\n        this._len = 0;\n    };\n    return LinkedList;\n}());\nexport { LinkedList };\nvar LRU = (function () {\n    function LRU(maxSize) {\n        this._list = new LinkedList();\n        this._maxSize = 10;\n        this._map = {};\n        this._maxSize = maxSize;\n    }\n    LRU.prototype.put = function (key, value) {\n        var list = this._list;\n        var map = this._map;\n        var removed = null;\n        if (map[key] == null) {\n            var len = list.len();\n            var entry = this._lastRemovedEntry;\n            if (len >= this._maxSize && len > 0) {\n                var leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n        return removed;\n    };\n    LRU.prototype.get = function (key) {\n        var entry = this._map[key];\n        var list = this._list;\n        if (entry != null) {\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n            return entry.value;\n        }\n    };\n    LRU.prototype.clear = function () {\n        this._list.clear();\n        this._map = {};\n    };\n    LRU.prototype.len = function () {\n        return this._list.len();\n    };\n    return LRU;\n}());\nexport default LRU;\n","import LRU from '../core/LRU.js';\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\nfunction clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\nfunction clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nfunction parseCssInt(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\nfunction parseCssFloat(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\nfunction putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\nexport function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n    var strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            var iv = parseInt(str.slice(1, 4), 16);\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            var iv = parseInt(str.slice(1, 7), 16);\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop());\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n    return rgba;\n}\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n        if (H < 0) {\n            H += 1;\n        }\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n    var hsla = [H * 360, S, L];\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n    return hsla;\n}\nexport function lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\nexport function toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\nexport function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n}\nexport var fastMapToColor = fastLerp;\nexport function lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([\n        clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n        clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n        clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n        clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n    ], 'rgba');\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\nexport var mapToColor = lerp;\nexport function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(h));\n        s != null && (colorArr[1] = parseCssFloat(s));\n        l != null && (colorArr[2] = parseCssFloat(l));\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\nexport function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\nexport function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\nexport function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum\n        : 0;\n}\nexport function random() {\n    return stringify([\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255)\n    ], 'rgb');\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","import { RADIAN_TO_DEGREE, retrieve2, logError, isFunction } from '../core/util.js';\nimport { parse } from '../tool/color.js';\nimport env from '../core/env.js';\nvar mathRound = Math.round;\nexport function normalizeColor(color) {\n    var opacity;\n    if (!color || color === 'transparent') {\n        color = 'none';\n    }\n    else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n        var arr = parse(color);\n        if (arr) {\n            color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n            opacity = arr[3];\n        }\n    }\n    return {\n        color: color,\n        opacity: opacity == null ? 1 : opacity\n    };\n}\nvar EPSILON = 1e-4;\nexport function isAroundZero(transform) {\n    return transform < EPSILON && transform > -EPSILON;\n}\nexport function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n}\nexport function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n}\nexport function round1(transform) {\n    return mathRound(transform * 10) / 10;\n}\nexport function getMatrixStr(m) {\n    return 'matrix('\n        + round3(m[0]) + ','\n        + round3(m[1]) + ','\n        + round3(m[2]) + ','\n        + round3(m[3]) + ','\n        + round4(m[4]) + ','\n        + round4(m[5])\n        + ')';\n}\nexport var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nexport function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nexport function hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nexport function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\nexport function getClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function isImagePattern(val) {\n    return val && (!!val.image);\n}\nexport function isSVGPattern(val) {\n    return val && (!!val.svgElement);\n}\nexport function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n}\nexport function isLinearGradient(val) {\n    return val.type === 'linear';\n}\nexport function isRadialGradient(val) {\n    return val.type === 'radial';\n}\nexport function isGradient(val) {\n    return val && (val.type === 'linear'\n        || val.type === 'radial');\n}\nexport function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n}\nexport function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n}\nexport function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n    if (x || y) {\n        res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n    if (rotation) {\n        res.push(\"rotate(\" + rotation + \")\");\n    }\n    if (scaleX !== 1 || scaleY !== 1) {\n        res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n    if (skewX || skewY) {\n        res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n    return res.join(' ');\n}\nexport var encodeBase64 = (function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n        return function (str) {\n            return window.btoa(unescape(str));\n        };\n    }\n    if (typeof Buffer !== 'undefined') {\n        return function (str) {\n            return Buffer.from(str).toString('base64');\n        };\n    }\n    return function (str) {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Base64 isn\\'t natively supported in the current environment.');\n        }\n        return null;\n    };\n})();\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event.js';\nimport * as zrUtil from '../core/util.js';\nimport Eventful from '../core/Eventful.js';\nimport env from '../core/env.js';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","import env from './core/env.js';\nvar dpr = 1;\nif (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n","export function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\nexport function copy(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\nexport function mul(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\nexport function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\nexport function rotate(out, a, rad) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n}\nexport function scale(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\nexport function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\nexport function clone(a) {\n    var b = create();\n    copy(b, a);\n    return b;\n}\n","import * as matrix from './matrix.js';\nimport * as vector from './vector.js';\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nvar scaleTmp = [];\nvar tmpTransform = [];\nvar originTransform = matrix.create();\nvar abs = Math.abs;\nvar Transformable = (function () {\n    function Transformable() {\n    }\n    Transformable.prototype.getLocalTransform = function (m) {\n        return Transformable.getLocalTransform(this, m);\n    };\n    Transformable.prototype.setPosition = function (arr) {\n        this.x = arr[0];\n        this.y = arr[1];\n    };\n    Transformable.prototype.setScale = function (arr) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    };\n    Transformable.prototype.setSkew = function (arr) {\n        this.skewX = arr[0];\n        this.skewY = arr[1];\n    };\n    Transformable.prototype.setOrigin = function (arr) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    };\n    Transformable.prototype.needLocalTransform = function () {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1)\n            || isNotAroundZero(this.skewX)\n            || isNotAroundZero(this.skewY);\n    };\n    Transformable.prototype.updateTransform = function () {\n        var parentTransform = this.parent && this.parent.transform;\n        var needLocalTransform = this.needLocalTransform();\n        var m = this.transform;\n        if (!(needLocalTransform || parentTransform)) {\n            m && mIdentity(m);\n            return;\n        }\n        m = m || matrix.create();\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n        if (parentTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parentTransform, m);\n            }\n            else {\n                matrix.copy(m, parentTransform);\n            }\n        }\n        this.transform = m;\n        this._resolveGlobalScaleRatio(m);\n    };\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n        var globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            var relX = scaleTmp[0] < 0 ? -1 : 1;\n            var relY = scaleTmp[1] < 0 ? -1 : 1;\n            var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    };\n    Transformable.prototype.getComputedTransform = function () {\n        var transformNode = this;\n        var ancestors = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n        return this.transform;\n    };\n    Transformable.prototype.setLocalTransform = function (m) {\n        if (!m) {\n            return;\n        }\n        var sx = m[0] * m[0] + m[1] * m[1];\n        var sy = m[2] * m[2] + m[3] * m[3];\n        var rotation = Math.atan2(m[1], m[0]);\n        var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n        sy = Math.sqrt(sy) * Math.cos(shearX);\n        sx = Math.sqrt(sx);\n        this.skewX = shearX;\n        this.skewY = 0;\n        this.rotation = -rotation;\n        this.x = +m[4];\n        this.y = +m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n        this.originX = 0;\n        this.originY = 0;\n    };\n    Transformable.prototype.decomposeTransform = function () {\n        if (!this.transform) {\n            return;\n        }\n        var parent = this.parent;\n        var m = this.transform;\n        if (parent && parent.transform) {\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        var ox = this.originX;\n        var oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n        this.setLocalTransform(m);\n    };\n    Transformable.prototype.getGlobalScale = function (out) {\n        var m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    };\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n        var v2 = [x, y];\n        var invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    };\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n        var v2 = [x, y];\n        var transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    };\n    Transformable.prototype.getLineScale = function () {\n        var m = this.transform;\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    };\n    Transformable.prototype.copyTransform = function (source) {\n        copyTransform(this, source);\n    };\n    Transformable.getLocalTransform = function (target, m) {\n        m = m || [];\n        var ox = target.originX || 0;\n        var oy = target.originY || 0;\n        var sx = target.scaleX;\n        var sy = target.scaleY;\n        var ax = target.anchorX;\n        var ay = target.anchorY;\n        var rotation = target.rotation || 0;\n        var x = target.x;\n        var y = target.y;\n        var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n        var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n        if (ox || oy || ax || ay) {\n            var dx = ox + ax;\n            var dy = oy + ay;\n            m[4] = -dx * sx - skewX * dy * sy;\n            m[5] = -dy * sy - skewY * dx * sx;\n        }\n        else {\n            m[4] = m[5] = 0;\n        }\n        m[0] = sx;\n        m[3] = sy;\n        m[1] = skewY * sx;\n        m[2] = skewX * sy;\n        rotation && matrix.rotate(m, m, rotation);\n        m[4] += ox + x;\n        m[5] += oy + y;\n        return m;\n    };\n    Transformable.initDefaultProps = (function () {\n        var proto = Transformable.prototype;\n        proto.scaleX =\n            proto.scaleY =\n                proto.globalScaleRatio = 1;\n        proto.x =\n            proto.y =\n                proto.originX =\n                    proto.originY =\n                        proto.skewX =\n                            proto.skewY =\n                                proto.rotation =\n                                    proto.anchorX =\n                                        proto.anchorY = 0;\n    })();\n    return Transformable;\n}());\n;\nexport var TRANSFORMABLE_PROPS = [\n    'x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'\n];\nexport function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n        var propName = TRANSFORMABLE_PROPS[i];\n        target[propName] = source[propName];\n    }\n}\nexport default Transformable;\n","var Point = (function () {\n    function Point(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Point.prototype.copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    Point.prototype.equal = function (other) {\n        return other.x === this.x && other.y === this.y;\n    };\n    Point.prototype.add = function (other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    };\n    Point.prototype.scale = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n    };\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    };\n    Point.prototype.sub = function (other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    };\n    Point.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y;\n    };\n    Point.prototype.len = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    Point.prototype.lenSquare = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Point.prototype.normalize = function () {\n        var len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    };\n    Point.prototype.distance = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    Point.prototype.distanceSquare = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.negate = function () {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    };\n    Point.prototype.transform = function (m) {\n        if (!m) {\n            return;\n        }\n        var x = this.x;\n        var y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    };\n    Point.prototype.toArray = function (out) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    };\n    Point.prototype.fromArray = function (input) {\n        this.x = input[0];\n        this.y = input[1];\n    };\n    Point.set = function (p, x, y) {\n        p.x = x;\n        p.y = y;\n    };\n    Point.copy = function (p, p2) {\n        p.x = p2.x;\n        p.y = p2.y;\n    };\n    Point.len = function (p) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n    Point.lenSquare = function (p) {\n        return p.x * p.x + p.y * p.y;\n    };\n    Point.dot = function (p0, p1) {\n        return p0.x * p1.x + p0.y * p1.y;\n    };\n    Point.add = function (out, p0, p1) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    };\n    Point.sub = function (out, p0, p1) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    };\n    Point.scale = function (out, p0, scalar) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    };\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    };\n    Point.lerp = function (out, p0, p1, t) {\n        var onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    };\n    return Point;\n}());\nexport default Point;\n","import * as matrix from './matrix.js';\nimport Point from './Point.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar lt = new Point();\nvar rb = new Point();\nvar lb = new Point();\nvar rt = new Point();\nvar minTv = new Point();\nvar maxTv = new Point();\nvar BoundingRect = (function () {\n    function BoundingRect(x, y, width, height) {\n        if (width < 0) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0) {\n            y = y + height;\n            height = -height;\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BoundingRect.prototype.union = function (other) {\n        var x = mathMin(other.x, this.x);\n        var y = mathMin(other.y, this.y);\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n        this.x = x;\n        this.y = y;\n    };\n    BoundingRect.prototype.applyTransform = function (m) {\n        BoundingRect.applyTransform(this, this, m);\n    };\n    BoundingRect.prototype.calculateTransform = function (b) {\n        var a = this;\n        var sx = b.width / a.width;\n        var sy = b.height / a.height;\n        var m = matrix.create();\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n        return m;\n    };\n    BoundingRect.prototype.intersect = function (b, mtv) {\n        if (!b) {\n            return false;\n        }\n        if (!(b instanceof BoundingRect)) {\n            b = BoundingRect.create(b);\n        }\n        var a = this;\n        var ax0 = a.x;\n        var ax1 = a.x + a.width;\n        var ay0 = a.y;\n        var ay1 = a.y + a.height;\n        var bx0 = b.x;\n        var bx1 = b.x + b.width;\n        var by0 = b.y;\n        var by1 = b.y + b.height;\n        var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (mtv) {\n            var dMin = Infinity;\n            var dMax = 0;\n            var d0 = Math.abs(ax1 - bx0);\n            var d1 = Math.abs(bx1 - ax0);\n            var d2 = Math.abs(ay1 - by0);\n            var d3 = Math.abs(by1 - ay0);\n            var dx = Math.min(d0, d1);\n            var dy = Math.min(d2, d3);\n            if (ax1 < bx0 || bx1 < ax0) {\n                if (dx > dMax) {\n                    dMax = dx;\n                    if (d0 < d1) {\n                        Point.set(maxTv, -d0, 0);\n                    }\n                    else {\n                        Point.set(maxTv, d1, 0);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d0 < d1) {\n                        Point.set(minTv, d0, 0);\n                    }\n                    else {\n                        Point.set(minTv, -d1, 0);\n                    }\n                }\n            }\n            if (ay1 < by0 || by1 < ay0) {\n                if (dy > dMax) {\n                    dMax = dy;\n                    if (d2 < d3) {\n                        Point.set(maxTv, 0, -d2);\n                    }\n                    else {\n                        Point.set(maxTv, 0, d3);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d2 < d3) {\n                        Point.set(minTv, 0, d2);\n                    }\n                    else {\n                        Point.set(minTv, 0, -d3);\n                    }\n                }\n            }\n        }\n        if (mtv) {\n            Point.copy(mtv, overlap ? minTv : maxTv);\n        }\n        return overlap;\n    };\n    BoundingRect.prototype.contain = function (x, y) {\n        var rect = this;\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    };\n    BoundingRect.prototype.clone = function () {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n    BoundingRect.prototype.copy = function (other) {\n        BoundingRect.copy(this, other);\n    };\n    BoundingRect.prototype.plain = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    };\n    BoundingRect.prototype.isFinite = function () {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    };\n    BoundingRect.prototype.isZero = function () {\n        return this.width === 0 || this.height === 0;\n    };\n    BoundingRect.create = function (rect) {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n    BoundingRect.copy = function (target, source) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n    };\n    BoundingRect.applyTransform = function (target, source, m) {\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            var sx = m[0];\n            var sy = m[3];\n            var tx = m[4];\n            var ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    };\n    return BoundingRect;\n}());\nexport default BoundingRect;\n","import BoundingRect from '../core/BoundingRect.js';\nimport LRU from '../core/LRU.js';\nimport { DEFAULT_FONT, platformApi } from '../core/platform.js';\nvar textWidthCache = {};\nexport function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    var width = cacheOfFont.get(text);\n    if (width == null) {\n        width = platformApi.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return getWidth('国', font);\n}\nexport function measureText(text, font) {\n    return platformApi.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n","import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.isGroup =\n                    elProto.draggable =\n                        elProto.dragging =\n                            elProto.ignoreClip =\n                                elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util.js';\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (child.__hostTarget) {\n                    throw 'This elemenet has been used as an attachment';\n                }\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replace = function (oldChild, newChild) {\n        var idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nimport env from './core/env.js';\nimport * as zrUtil from './core/util.js';\nimport Handler from './Handler.js';\nimport Storage from './Storage.js';\nimport Animation, { getTime } from './animation/Animation.js';\nimport HandlerProxy from './dom/HandlerProxy.js';\nimport { lum } from './tool/color.js';\nimport { DARK_MODE_THRESHOLD } from './config.js';\nimport Group from './graphic/Group.js';\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var storage = new Storage();\n        var rendererType = opts.renderer || 'canvas';\n        if (!painterCtors[rendererType]) {\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (!painterCtors[rendererType]) {\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n            }\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        var ssrMode = opts.ssr || painter.ssrOnly;\n        this.storage = storage;\n        this.painter = painter;\n        var handerProxy = (!env.node && !env.worker && !ssrMode)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        this.handler = new Handler(storage, painter, handerProxy, painter.root);\n        this.animation = new Animation({\n            stage: {\n                update: ssrMode ? null : function () { return _this._flush(true); }\n            }\n        });\n        if (!ssrMode) {\n            this.animation.start();\n        }\n    }\n    ZRender.prototype.add = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        this.handler.on(eventName, eventHandler, context);\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nexport function init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexport function dispose(zr) {\n    zr.dispose();\n}\nexport function disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexport function getInstance(id) {\n    return instances[id];\n}\nexport function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nexport var version = '5.3.0';\n;\n","import { __extends } from \"tslib\";\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { keys, extend, createObject } from '../core/util.js';\nimport { REDRAW_BIT, STYLE_CHANGED_BIT } from './constants.js';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n        if (!notRedraw) {\n            this.markRedraw();\n        }\n        this.__dirty |= STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;\n        for (var i = 0; i < statesKeys.length; i++) {\n            var key = statesKeys[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","import * as vec2 from './vector.js';\nimport * as curve from './curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\nexport function fromPoints(points, min, max) {\n    if (points.length === 0) {\n        return;\n    }\n    var p = points[0];\n    var left = p[0];\n    var right = p[0];\n    var top = p[1];\n    var bottom = p[1];\n    for (var i = 1; i < points.length; i++) {\n        p = points[i];\n        left = mathMin(left, p[0]);\n        right = mathMax(right, p[0]);\n        top = mathMin(top, p[1]);\n        bottom = mathMax(bottom, p[1]);\n    }\n    min[0] = left;\n    min[1] = top;\n    max[0] = right;\n    max[1] = bottom;\n}\nexport function fromLine(x0, y0, x1, y1, min, max) {\n    min[0] = mathMin(x0, x1);\n    min[1] = mathMin(y0, y1);\n    max[0] = mathMax(x0, x1);\n    max[1] = mathMax(y0, y1);\n}\nvar xDim = [];\nvar yDim = [];\nexport function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n    var cubicExtrema = curve.cubicExtrema;\n    var cubicAt = curve.cubicAt;\n    var n = cubicExtrema(x0, x1, x2, x3, xDim);\n    min[0] = Infinity;\n    min[1] = Infinity;\n    max[0] = -Infinity;\n    max[1] = -Infinity;\n    for (var i = 0; i < n; i++) {\n        var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n        min[0] = mathMin(x, min[0]);\n        max[0] = mathMax(x, max[0]);\n    }\n    n = cubicExtrema(y0, y1, y2, y3, yDim);\n    for (var i = 0; i < n; i++) {\n        var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n        min[1] = mathMin(y, min[1]);\n        max[1] = mathMax(y, max[1]);\n    }\n    min[0] = mathMin(x0, min[0]);\n    max[0] = mathMax(x0, max[0]);\n    min[0] = mathMin(x3, min[0]);\n    max[0] = mathMax(x3, max[0]);\n    min[1] = mathMin(y0, min[1]);\n    max[1] = mathMax(y0, max[1]);\n    min[1] = mathMin(y3, min[1]);\n    max[1] = mathMax(y3, max[1]);\n}\nexport function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n    var quadraticExtremum = curve.quadraticExtremum;\n    var quadraticAt = curve.quadraticAt;\n    var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n    var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n    var x = quadraticAt(x0, x1, x2, tx);\n    var y = quadraticAt(y0, y1, y2, ty);\n    min[0] = mathMin(x0, x2, x);\n    min[1] = mathMin(y0, y2, y);\n    max[0] = mathMax(x0, x2, x);\n    max[1] = mathMax(y0, y2, y);\n}\nexport function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n    var vec2Min = vec2.min;\n    var vec2Max = vec2.max;\n    var diff = Math.abs(startAngle - endAngle);\n    if (diff % PI2 < 1e-4 && diff > 1e-4) {\n        min[0] = x - rx;\n        min[1] = y - ry;\n        max[0] = x + rx;\n        max[1] = y + ry;\n        return;\n    }\n    start[0] = mathCos(startAngle) * rx + x;\n    start[1] = mathSin(startAngle) * ry + y;\n    end[0] = mathCos(endAngle) * rx + x;\n    end[1] = mathSin(endAngle) * ry + y;\n    vec2Min(min, start, end);\n    vec2Max(max, start, end);\n    startAngle = startAngle % (PI2);\n    if (startAngle < 0) {\n        startAngle = startAngle + PI2;\n    }\n    endAngle = endAngle % (PI2);\n    if (endAngle < 0) {\n        endAngle = endAngle + PI2;\n    }\n    if (startAngle > endAngle && !anticlockwise) {\n        endAngle += PI2;\n    }\n    else if (startAngle < endAngle && anticlockwise) {\n        startAngle += PI2;\n    }\n    if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n    }\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n            extremity[0] = mathCos(angle) * rx + x;\n            extremity[1] = mathSin(angle) * ry + y;\n            vec2Min(min, extremity, min);\n            vec2Max(max, extremity, max);\n        }\n    }\n}\n","import * as vec2 from './vector.js';\nimport BoundingRect from './BoundingRect.js';\nimport { devicePixelRatio as dpr } from '../config.js';\nimport { fromLine, fromCubic, fromQuadratic, fromArc } from './bbox.js';\nimport { cubicLength, cubicSubdivide, quadraticLength, quadraticSubdivide } from './curve.js';\nvar CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n};\nvar tmpOutX = [];\nvar tmpOutY = [];\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathAbs = Math.abs;\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\nvar tmpAngles = [];\nfunction modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return (n % 2) * PI;\n}\nexport function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n    if (newStartAngle < 0) {\n        newStartAngle += PI2;\n    }\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n        newEndAngle = newStartAngle + PI2;\n    }\n    else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n        newEndAngle = newStartAngle - PI2;\n    }\n    else if (!anticlockwise && newStartAngle > newEndAngle) {\n        newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    }\n    else if (anticlockwise && newStartAngle < newEndAngle) {\n        newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n}\nvar PathProxy = (function () {\n    function PathProxy(notSaveData) {\n        this.dpr = 1;\n        this._xi = 0;\n        this._yi = 0;\n        this._x0 = 0;\n        this._y0 = 0;\n        this._len = 0;\n        if (notSaveData) {\n            this._saveData = false;\n        }\n        if (this._saveData) {\n            this.data = [];\n        }\n    }\n    PathProxy.prototype.increaseVersion = function () {\n        this._version++;\n    };\n    PathProxy.prototype.getVersion = function () {\n        return this._version;\n    };\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n        segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n        if (segmentIgnoreThreshold > 0) {\n            this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n            this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n        }\n    };\n    PathProxy.prototype.setDPR = function (dpr) {\n        this.dpr = dpr;\n    };\n    PathProxy.prototype.setContext = function (ctx) {\n        this._ctx = ctx;\n    };\n    PathProxy.prototype.getContext = function () {\n        return this._ctx;\n    };\n    PathProxy.prototype.beginPath = function () {\n        this._ctx && this._ctx.beginPath();\n        this.reset();\n        return this;\n    };\n    PathProxy.prototype.reset = function () {\n        if (this._saveData) {\n            this._len = 0;\n        }\n        if (this._pathSegLen) {\n            this._pathSegLen = null;\n            this._pathLen = 0;\n        }\n        this._version++;\n    };\n    PathProxy.prototype.moveTo = function (x, y) {\n        this._drawPendingPt();\n        this.addData(CMD.M, x, y);\n        this._ctx && this._ctx.moveTo(x, y);\n        this._x0 = x;\n        this._y0 = y;\n        this._xi = x;\n        this._yi = y;\n        return this;\n    };\n    PathProxy.prototype.lineTo = function (x, y) {\n        var dx = mathAbs(x - this._xi);\n        var dy = mathAbs(y - this._yi);\n        var exceedUnit = dx > this._ux || dy > this._uy;\n        this.addData(CMD.L, x, y);\n        if (this._ctx && exceedUnit) {\n            this._ctx.lineTo(x, y);\n        }\n        if (exceedUnit) {\n            this._xi = x;\n            this._yi = y;\n            this._pendingPtDist = 0;\n        }\n        else {\n            var d2 = dx * dx + dy * dy;\n            if (d2 > this._pendingPtDist) {\n                this._pendingPtX = x;\n                this._pendingPtY = y;\n                this._pendingPtDist = d2;\n            }\n        }\n        return this;\n    };\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n        this._drawPendingPt();\n        this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n        if (this._ctx) {\n            this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n        }\n        this._xi = x3;\n        this._yi = y3;\n        return this;\n    };\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n        this._drawPendingPt();\n        this.addData(CMD.Q, x1, y1, x2, y2);\n        if (this._ctx) {\n            this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n        }\n        this._xi = x2;\n        this._yi = y2;\n        return this;\n    };\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this._drawPendingPt();\n        tmpAngles[0] = startAngle;\n        tmpAngles[1] = endAngle;\n        normalizeArcAngles(tmpAngles, anticlockwise);\n        startAngle = tmpAngles[0];\n        endAngle = tmpAngles[1];\n        var delta = endAngle - startAngle;\n        this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n        this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n        this._xi = mathCos(endAngle) * r + cx;\n        this._yi = mathSin(endAngle) * r + cy;\n        return this;\n    };\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        this._drawPendingPt();\n        if (this._ctx) {\n            this._ctx.arcTo(x1, y1, x2, y2, radius);\n        }\n        return this;\n    };\n    PathProxy.prototype.rect = function (x, y, w, h) {\n        this._drawPendingPt();\n        this._ctx && this._ctx.rect(x, y, w, h);\n        this.addData(CMD.R, x, y, w, h);\n        return this;\n    };\n    PathProxy.prototype.closePath = function () {\n        this._drawPendingPt();\n        this.addData(CMD.Z);\n        var ctx = this._ctx;\n        var x0 = this._x0;\n        var y0 = this._y0;\n        if (ctx) {\n            ctx.closePath();\n        }\n        this._xi = x0;\n        this._yi = y0;\n        return this;\n    };\n    PathProxy.prototype.fill = function (ctx) {\n        ctx && ctx.fill();\n        this.toStatic();\n    };\n    PathProxy.prototype.stroke = function (ctx) {\n        ctx && ctx.stroke();\n        this.toStatic();\n    };\n    PathProxy.prototype.len = function () {\n        return this._len;\n    };\n    PathProxy.prototype.setData = function (data) {\n        var len = data.length;\n        if (!(this.data && this.data.length === len) && hasTypedArray) {\n            this.data = new Float32Array(len);\n        }\n        for (var i = 0; i < len; i++) {\n            this.data[i] = data[i];\n        }\n        this._len = len;\n    };\n    PathProxy.prototype.appendPath = function (path) {\n        if (!(path instanceof Array)) {\n            path = [path];\n        }\n        var len = path.length;\n        var appendSize = 0;\n        var offset = this._len;\n        for (var i = 0; i < len; i++) {\n            appendSize += path[i].len();\n        }\n        if (hasTypedArray && (this.data instanceof Float32Array)) {\n            this.data = new Float32Array(offset + appendSize);\n        }\n        for (var i = 0; i < len; i++) {\n            var appendPathData = path[i].data;\n            for (var k = 0; k < appendPathData.length; k++) {\n                this.data[offset++] = appendPathData[k];\n            }\n        }\n        this._len = offset;\n    };\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (this._len + arguments.length > data.length) {\n            this._expandData();\n            data = this.data;\n        }\n        for (var i = 0; i < arguments.length; i++) {\n            data[this._len++] = arguments[i];\n        }\n    };\n    PathProxy.prototype._drawPendingPt = function () {\n        if (this._pendingPtDist > 0) {\n            this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n            this._pendingPtDist = 0;\n        }\n    };\n    PathProxy.prototype._expandData = function () {\n        if (!(this.data instanceof Array)) {\n            var newData = [];\n            for (var i = 0; i < this._len; i++) {\n                newData[i] = this.data[i];\n            }\n            this.data = newData;\n        }\n    };\n    PathProxy.prototype.toStatic = function () {\n        if (!this._saveData) {\n            return;\n        }\n        this._drawPendingPt();\n        var data = this.data;\n        if (data instanceof Array) {\n            data.length = this._len;\n            if (hasTypedArray && this._len > 11) {\n                this.data = new Float32Array(data);\n            }\n        }\n    };\n    PathProxy.prototype.getBoundingRect = function () {\n        min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n        max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n        var data = this.data;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        var i;\n        for (i = 0; i < this._len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    min2[0] = x0;\n                    min2[1] = y0;\n                    max2[0] = x0;\n                    max2[1] = y0;\n                    break;\n                case CMD.L:\n                    fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.C:\n                    fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.Q:\n                    fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var endAngle = data[i++] + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n                    break;\n                case CMD.Z:\n                    xi = x0;\n                    yi = y0;\n                    break;\n            }\n            vec2.min(min, min, min2);\n            vec2.max(max, max, max2);\n        }\n        if (i === 0) {\n            min[0] = min[1] = max[0] = max[1] = 0;\n        }\n        return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    };\n    PathProxy.prototype._calculateLength = function () {\n        var data = this.data;\n        var len = this._len;\n        var ux = this._ux;\n        var uy = this._uy;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        if (!this._pathSegLen) {\n            this._pathSegLen = [];\n        }\n        var pathSegLen = this._pathSegLen;\n        var pathTotalLen = 0;\n        var segCount = 0;\n        for (var i = 0; i < len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            var l = -1;\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    break;\n                case CMD.L: {\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var dx = x2 - xi;\n                    var dy = y2 - yi;\n                    if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\n                        l = Math.sqrt(dx * dx + dy * dy);\n                        xi = x2;\n                        yi = y2;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3 = data[i++];\n                    var y3 = data[i++];\n                    l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var delta = data[i++];\n                    var endAngle = delta + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    l = mathMax(rx, ry) * mathMin(PI2, Math.abs(delta));\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R: {\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    l = width * 2 + height * 2;\n                    break;\n                }\n                case CMD.Z: {\n                    var dx = x0 - xi;\n                    var dy = y0 - yi;\n                    l = Math.sqrt(dx * dx + dy * dy);\n                    xi = x0;\n                    yi = y0;\n                    break;\n                }\n            }\n            if (l >= 0) {\n                pathSegLen[segCount++] = l;\n                pathTotalLen += l;\n            }\n        }\n        this._pathLen = pathTotalLen;\n        return pathTotalLen;\n    };\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n        var d = this.data;\n        var ux = this._ux;\n        var uy = this._uy;\n        var len = this._len;\n        var x0;\n        var y0;\n        var xi;\n        var yi;\n        var x;\n        var y;\n        var drawPart = percent < 1;\n        var pathSegLen;\n        var pathTotalLen;\n        var accumLength = 0;\n        var segCount = 0;\n        var displayedLength;\n        var pendingPtDist = 0;\n        var pendingPtX;\n        var pendingPtY;\n        if (drawPart) {\n            if (!this._pathSegLen) {\n                this._calculateLength();\n            }\n            pathSegLen = this._pathSegLen;\n            pathTotalLen = this._pathLen;\n            displayedLength = percent * pathTotalLen;\n            if (!displayedLength) {\n                return;\n            }\n        }\n        lo: for (var i = 0; i < len;) {\n            var cmd = d[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = d[i];\n                yi = d[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            if (cmd !== CMD.L && pendingPtDist > 0) {\n                ctx.lineTo(pendingPtX, pendingPtY);\n                pendingPtDist = 0;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    x0 = xi = d[i++];\n                    y0 = yi = d[i++];\n                    ctx.moveTo(xi, yi);\n                    break;\n                case CMD.L: {\n                    x = d[i++];\n                    y = d[i++];\n                    var dx = mathAbs(x - xi);\n                    var dy = mathAbs(y - yi);\n                    if (dx > ux || dy > uy) {\n                        if (drawPart) {\n                            var l = pathSegLen[segCount++];\n                            if (accumLength + l > displayedLength) {\n                                var t = (displayedLength - accumLength) / l;\n                                ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                                break lo;\n                            }\n                            accumLength += l;\n                        }\n                        ctx.lineTo(x, y);\n                        xi = x;\n                        yi = y;\n                        pendingPtDist = 0;\n                    }\n                    else {\n                        var d2 = dx * dx + dy * dy;\n                        if (d2 > pendingPtDist) {\n                            pendingPtX = x;\n                            pendingPtY = y;\n                            pendingPtDist = d2;\n                        }\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    var x3 = d[i++];\n                    var y3 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                            cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                            ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                            quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                            ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.quadraticCurveTo(x1, y1, x2, y2);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = d[i++];\n                    var cy = d[i++];\n                    var rx = d[i++];\n                    var ry = d[i++];\n                    var startAngle = d[i++];\n                    var delta = d[i++];\n                    var psi = d[i++];\n                    var anticlockwise = !d[i++];\n                    var r = (rx > ry) ? rx : ry;\n                    var isEllipse = mathAbs(rx - ry) > 1e-3;\n                    var endAngle = startAngle + delta;\n                    var breakBuild = false;\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                            breakBuild = true;\n                        }\n                        accumLength += l;\n                    }\n                    if (isEllipse && ctx.ellipse) {\n                        ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n                    }\n                    else {\n                        ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n                    }\n                    if (breakBuild) {\n                        break lo;\n                    }\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = d[i];\n                    y0 = yi = d[i + 1];\n                    x = d[i++];\n                    y = d[i++];\n                    var width = d[i++];\n                    var height = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var d_1 = displayedLength - accumLength;\n                            ctx.moveTo(x, y);\n                            ctx.lineTo(x + mathMin(d_1, width), y);\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + width, y + mathMin(d_1, height));\n                            }\n                            d_1 -= height;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + mathMax(width - d_1, 0), y + height);\n                            }\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x, y + mathMax(height - d_1, 0));\n                            }\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.rect(x, y, width, height);\n                    break;\n                case CMD.Z:\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.closePath();\n                    xi = x0;\n                    yi = y0;\n            }\n        }\n    };\n    PathProxy.prototype.clone = function () {\n        var newProxy = new PathProxy();\n        var data = this.data;\n        newProxy.data = data.slice ? data.slice()\n            : Array.prototype.slice.call(data);\n        newProxy._len = this._len;\n        return newProxy;\n    };\n    PathProxy.CMD = CMD;\n    PathProxy.initDefaultProps = (function () {\n        var proto = PathProxy.prototype;\n        proto._saveData = true;\n        proto._ux = 0;\n        proto._uy = 0;\n        proto._pendingPtDist = 0;\n        proto._version = 0;\n    })();\n    return PathProxy;\n}());\nexport default PathProxy;\n","export function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n    if ((y > y0 + _l && y > y1 + _l)\n        || (y < y0 - _l && y < y1 - _l)\n        || (x > x0 + _l && x > x1 + _l)\n        || (x < x0 - _l && x < x1 - _l)) {\n        return false;\n    }\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    }\n    else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n    var tmp = _a * x - y + _b;\n    var _s = tmp * tmp / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n}\n","import * as curve from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\n        return false;\n    }\n    var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n}\n","import { quadraticProjectPoint } from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\n        return false;\n    }\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n}\n","var PI2 = Math.PI * 2;\nexport function normalizeRadian(angle) {\n    angle %= PI2;\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return angle;\n}\n","import { normalizeRadian } from './util.js';\nvar PI2 = Math.PI * 2;\nexport function containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    if ((d - _l > r) || (d + _l < r)) {\n        return false;\n    }\n    if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n        return true;\n    }\n    if (anticlockwise) {\n        var tmp = startAngle;\n        startAngle = normalizeRadian(endAngle);\n        endAngle = normalizeRadian(tmp);\n    }\n    else {\n        startAngle = normalizeRadian(startAngle);\n        endAngle = normalizeRadian(endAngle);\n    }\n    if (startAngle > endAngle) {\n        endAngle += PI2;\n    }\n    var angle = Math.atan2(y, x);\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return (angle >= startAngle && angle <= endAngle)\n        || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n","export default function windingLine(x0, y0, x1, y1, x, y) {\n    if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\n        return 0;\n    }\n    if (y1 === y0) {\n        return 0;\n    }\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n    if (t === 1 || t === 0) {\n        dir = y1 < y0 ? 0.5 : -0.5;\n    }\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n","import PathProxy from '../core/PathProxy.js';\nimport * as line from './line.js';\nimport * as cubic from './cubic.js';\nimport * as quadratic from './quadratic.js';\nimport * as arc from './arc.js';\nimport * as curve from '../core/curve.js';\nimport windingLine from './windingLine.js';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\nfunction swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n}\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if ((y > y0 && y > y1 && y > y2 && y > y3)\n        || (y < y0 && y < y1 && y < y2 && y < y3)) {\n        return 0;\n    }\n    var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var w = 0;\n        var nExtrema = -1;\n        var y0_ = void 0;\n        var y1_ = void 0;\n        for (var i = 0; i < nRoots; i++) {\n            var t = roots[i];\n            var unit = (t === 0 || t === 1) ? 0.5 : 1;\n            var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n            if (x_ < x) {\n                continue;\n            }\n            if (nExtrema < 0) {\n                nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n                if (extrema[1] < extrema[0] && nExtrema > 1) {\n                    swapExtrema();\n                }\n                y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n                if (nExtrema > 1) {\n                    y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n                }\n            }\n            if (nExtrema === 2) {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else if (t < extrema[1]) {\n                    w += y1_ < y0_ ? unit : -unit;\n                }\n                else {\n                    w += y3 < y1_ ? unit : -unit;\n                }\n            }\n            else {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y3 < y0_ ? unit : -unit;\n                }\n            }\n        }\n        return w;\n    }\n}\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if ((y > y0 && y > y1 && y > y2)\n        || (y < y0 && y < y1 && y < y2)) {\n        return 0;\n    }\n    var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var t = curve.quadraticExtremum(y0, y1, y2);\n        if (t >= 0 && t <= 1) {\n            var w = 0;\n            var y_ = curve.quadraticAt(y0, y1, y2, t);\n            for (var i = 0; i < nRoots; i++) {\n                var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\n                var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n                if (x_ < x) {\n                    continue;\n                }\n                if (roots[i] < t) {\n                    w += y_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y2 < y_ ? unit : -unit;\n                }\n            }\n            return w;\n        }\n        else {\n            var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\n            var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n            if (x_ < x) {\n                return 0;\n            }\n            return y2 < y0 ? unit : -unit;\n        }\n    }\n}\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n    if (y > r || y < -r) {\n        return 0;\n    }\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n    if (dTheta < 1e-4) {\n        return 0;\n    }\n    if (dTheta >= PI2 - 1e-4) {\n        startAngle = 0;\n        endAngle = PI2;\n        var dir = anticlockwise ? 1 : -1;\n        if (x >= roots[0] + cx && x <= roots[1] + cx) {\n            return dir;\n        }\n        else {\n            return 0;\n        }\n    }\n    if (startAngle > endAngle) {\n        var tmp_1 = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp_1;\n    }\n    if (startAngle < 0) {\n        startAngle += PI2;\n        endAngle += PI2;\n    }\n    var w = 0;\n    for (var i = 0; i < 2; i++) {\n        var x_ = roots[i];\n        if (x_ + cx > x) {\n            var angle = Math.atan2(y, x_);\n            var dir = anticlockwise ? 1 : -1;\n            if (angle < 0) {\n                angle = PI2 + angle;\n            }\n            if ((angle >= startAngle && angle <= endAngle)\n                || (angle + PI2 >= startAngle && angle + PI2 <= endAngle)) {\n                if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n                    dir = -dir;\n                }\n                w += dir;\n            }\n        }\n    }\n    return w;\n}\nfunction containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (cmd === CMD.M && i > 1) {\n            if (!isStroke) {\n                w += windingLine(xi, yi, x0, y0, x, y);\n            }\n        }\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n        }\n        switch (cmd) {\n            case CMD.M:\n                x0 = data[i++];\n                y0 = data[i++];\n                xi = x0;\n                yi = y0;\n                break;\n            case CMD.L:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.C:\n                if (isStroke) {\n                    if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.Q:\n                if (isStroke) {\n                    if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var theta = data[i++];\n                var dTheta = data[i++];\n                i += 1;\n                var anticlockwise = !!(1 - data[i++]);\n                x1 = Math.cos(theta) * rx + cx;\n                y1 = Math.sin(theta) * ry + cy;\n                if (!isFirst) {\n                    w += windingLine(xi, yi, x1, y1, x, y);\n                }\n                else {\n                    x0 = x1;\n                    y0 = y1;\n                }\n                var _x = (x - cx) * ry / rx + cx;\n                if (isStroke) {\n                    if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n                }\n                xi = Math.cos(theta + dTheta) * rx + cx;\n                yi = Math.sin(theta + dTheta) * ry + cy;\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                var width = data[i++];\n                var height = data[i++];\n                x1 = x0 + width;\n                y1 = y0 + height;\n                if (isStroke) {\n                    if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y)\n                        || line.containStroke(x1, y0, x1, y1, lineWidth, x, y)\n                        || line.containStroke(x1, y1, x0, y1, lineWidth, x, y)\n                        || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(x1, y0, x1, y1, x, y);\n                    w += windingLine(x0, y1, x0, y0, x, y);\n                }\n                break;\n            case CMD.Z:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, x0, y0, x, y);\n                }\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n        w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n    return w !== 0;\n}\nexport function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n}\nexport function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport * as pathContain from '../contain/path.js';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util.js';\nimport { lum } from '../tool/color.js';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT, STYLE_CHANGED_BIT } from './constants.js';\nimport { TRANSFORMABLE_PROPS } from '../core/Transformable.js';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n]);\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= REDRAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n        !this.path && this.createPathProxy();\n        this.path.beginPath();\n        this.buildPath(this.path, this.shape, inBatch);\n        return this.path;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectStroke.width += w / lineScale;\n                    rectStroke.height += w / lineScale;\n                    rectStroke.x -= w / lineScale / 2;\n                    rectStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import PathProxy from '../core/PathProxy.js';\nimport { applyTransform as v2ApplyTransform } from '../core/vector.js';\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\nexport default function transformPath(path, m) {\n    if (!m) {\n        return;\n    }\n    var data = path.data;\n    var len = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var R = CMD.R;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    for (i = 0, j = 0; i < len;) {\n        cmd = data[i++];\n        j = i;\n        nPoint = 0;\n        switch (cmd) {\n            case M:\n                nPoint = 1;\n                break;\n            case L:\n                nPoint = 1;\n                break;\n            case C:\n                nPoint = 3;\n                break;\n            case Q:\n                nPoint = 2;\n                break;\n            case A:\n                var x = m[4];\n                var y = m[5];\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n                data[i] *= sx;\n                data[i++] += x;\n                data[i] *= sy;\n                data[i++] += y;\n                data[i++] *= sx;\n                data[i++] *= sy;\n                data[i++] += angle;\n                data[i++] += angle;\n                i += 2;\n                j = i;\n                break;\n            case R:\n                p[0] = data[i++];\n                p[1] = data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n                p[0] += data[i++];\n                p[1] += data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n        }\n        for (k = 0; k < nPoint; k++) {\n            var p_1 = points[k];\n            p_1[0] = data[i++];\n            p_1[1] = data[i++];\n            v2ApplyTransform(p_1, p_1, m);\n            data[j++] = p_1[0];\n            data[j++] = p_1[1];\n        }\n    }\n    path.increaseVersion();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport transformPath from './transformPath.js';\nimport { extend } from '../core/util.js';\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n;\nfunction vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n}\n;\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n        * Math.acos(vRatio(u, v));\n}\n;\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI / 180.0);\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\n        + mathSin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\n        + mathCos(psi) * (y1 - y2) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= mathSqrt(lambda);\n        ry *= mathSqrt(lambda);\n    }\n    var f = (fa === fs ? -1 : 1)\n        * mathSqrt((((rx * rx) * (ry * ry))\n            - ((rx * rx) * (yp * yp))\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n            + (ry * ry) * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0\n        + mathCos(psi) * cxp\n        - mathSin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0\n        + mathSin(psi) * cxp\n        + mathCos(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (dTheta < 0) {\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\n        dTheta = PI * 2 + (n % 2) * PI;\n    }\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction createPathProxyFromString(data) {\n    var path = new PathProxy();\n    if (!data) {\n        return path;\n    }\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n    if (!cmdList) {\n        return path;\n    }\n    for (var l = 0; l < cmdList.length; l++) {\n        var cmdText = cmdList[l];\n        var cmdStr = cmdText.charAt(0);\n        var cmd = void 0;\n        var p = cmdText.match(numberReg) || [];\n        var pLen = p.length;\n        for (var i = 0; i < pLen; i++) {\n            p[i] = parseFloat(p[i]);\n        }\n        var off = 0;\n        while (off < pLen) {\n            var ctlPtx = void 0;\n            var ctlPty = void 0;\n            var rx = void 0;\n            var ry = void 0;\n            var psi = void 0;\n            var fa = void 0;\n            var fs = void 0;\n            var x1 = cpx;\n            var y1 = cpy;\n            var len = void 0;\n            var pathData = void 0;\n            switch (cmdStr) {\n                case 'l':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'l';\n                    break;\n                case 'M':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'L';\n                    break;\n                case 'h':\n                    cpx += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'C':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n                    cpx = p[off - 2];\n                    cpy = p[off - 1];\n                    break;\n                case 'c':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n                    cpx += p[off - 2];\n                    cpy += p[off - 1];\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = cpx + p[off++];\n                    y1 = cpy + p[off++];\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 'Q':\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'q':\n                    x1 = p[off++] + cpx;\n                    y1 = p[off++] + cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n                case 'a':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n            }\n        }\n        if (cmdStr === 'z' || cmdStr === 'Z') {\n            cmd = CMD.Z;\n            path.addData(cmd);\n            cpx = subpathX;\n            cpy = subpathY;\n        }\n        prevCmd = cmd;\n    }\n    path.toStatic();\n    return path;\n}\nvar SVGPath = (function (_super) {\n    __extends(SVGPath, _super);\n    function SVGPath() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SVGPath.prototype.applyTransform = function (m) { };\n    return SVGPath;\n}(Path));\nfunction isPathProxy(path) {\n    return path.setData != null;\n}\nfunction createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n    innerOpts.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.setData(pathProxy.data);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n        else {\n            var ctx = path;\n            pathProxy.rebuildPath(ctx, 1);\n        }\n    };\n    innerOpts.applyTransform = function (m) {\n        transformPath(pathProxy, m);\n        this.dirtyShape();\n    };\n    return innerOpts;\n}\nexport function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n}\nexport function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n    var Sub = (function (_super) {\n        __extends(Sub, _super);\n        function Sub(opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.applyTransform = innerOpts.applyTransform;\n            _this.buildPath = innerOpts.buildPath;\n            return _this;\n        }\n        return Sub;\n    }(SVGPath));\n    return Sub;\n}\nexport function mergePath(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n    for (var i = 0; i < len; i++) {\n        var pathEl = pathEls[i];\n        pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n    pathBundle.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.appendPath(pathList);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    return pathBundle;\n}\nexport function clonePath(sourcePath, opts) {\n    opts = opts || {};\n    var path = new Path();\n    if (sourcePath.shape) {\n        path.setShape(sourcePath.shape);\n    }\n    path.setStyle(sourcePath.style);\n    if (opts.bakeTransform) {\n        transformPath(path.path, sourcePath.getComputedTransform());\n    }\n    else {\n        if (opts.toLocal) {\n            path.setLocalTransform(sourcePath.getComputedTransform());\n        }\n        else {\n            path.copyTransform(sourcePath);\n        }\n    }\n    path.buildPath = sourcePath.buildPath;\n    path.applyTransform = path.applyTransform;\n    path.z = sourcePath.z;\n    path.z2 = sourcePath.z2;\n    path.zlevel = sourcePath.zlevel;\n    return path;\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { defaults, createObject } from '../core/util.js';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nexport { CircleShape };\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape) {\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundRectHelper from '../helper/roundRect.js';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize.js';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nexport { RectShape };\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nexport { EllipseShape };\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nexport { LineShape };\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","import smoothBezier from './smoothBezier.js';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth) {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nexport { PolygonShape };\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nexport { PolylineShape };\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable.js';\nimport { getBoundingRect } from '../contain/text.js';\nimport { DEFAULT_PATH_STYLE } from './Path.js';\nimport { createObject, defaults } from '../core/util.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            var text = style.text;\n            text != null ? (text += '') : (text = '');\n            var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n            rect.x += style.x || 0;\n            rect.y += style.y || 0;\n            if (this.hasStroke()) {\n                var w = style.lineWidth;\n                rect.x -= w / 2;\n                rect.y -= w / 2;\n                rect.width += w;\n                rect.height += w;\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","import { isString } from '../core/util.js';\nexport function parseXML(svg) {\n    if (isString(svg)) {\n        var parser = new DOMParser();\n        svg = parser.parseFromString(svg, 'text/xml');\n    }\n    var svgNode = svg;\n    if (svgNode.nodeType === 9) {\n        svgNode = svgNode.firstChild;\n    }\n    while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\n        svgNode = svgNode.nextSibling;\n    }\n    return svgNode;\n}\n","import Group from '../graphic/Group.js';\nimport ZRImage from '../graphic/Image.js';\nimport Circle from '../graphic/shape/Circle.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Ellipse from '../graphic/shape/Ellipse.js';\nimport Line from '../graphic/shape/Line.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Polyline from '../graphic/shape/Polyline.js';\nimport * as matrix from '../core/matrix.js';\nimport { createFromString } from './path.js';\nimport { defaults, trim, each, map, keys, hasOwn } from '../core/util.js';\nimport LinearGradient from '../graphic/LinearGradient.js';\nimport RadialGradient from '../graphic/RadialGradient.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { parseXML } from './parseXML.js';\n;\nvar nodeParsers;\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP = {\n    'fill': 'fill',\n    'stroke': 'stroke',\n    'stroke-width': 'lineWidth',\n    'opacity': 'opacity',\n    'fill-opacity': 'fillOpacity',\n    'stroke-opacity': 'strokeOpacity',\n    'stroke-dasharray': 'lineDash',\n    'stroke-dashoffset': 'lineDashOffset',\n    'stroke-linecap': 'lineCap',\n    'stroke-linejoin': 'lineJoin',\n    'stroke-miterlimit': 'miterLimit',\n    'font-family': 'fontFamily',\n    'font-size': 'fontSize',\n    'font-style': 'fontStyle',\n    'font-weight': 'fontWeight',\n    'text-anchor': 'textAlign',\n    'visibility': 'visibility',\n    'display': 'display'\n};\nvar INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS = keys(INHERITABLE_STYLE_ATTRIBUTES_MAP);\nvar SELF_STYLE_ATTRIBUTES_MAP = {\n    'alignment-baseline': 'textBaseline',\n    'stop-color': 'stopColor'\n};\nvar SELF_STYLE_ATTRIBUTES_MAP_KEYS = keys(SELF_STYLE_ATTRIBUTES_MAP);\nvar SVGParser = (function () {\n    function SVGParser() {\n        this._defs = {};\n        this._root = null;\n    }\n    SVGParser.prototype.parse = function (xml, opt) {\n        opt = opt || {};\n        var svg = parseXML(xml);\n        if (process.env.NODE_ENV !== 'production') {\n            if (!svg) {\n                throw new Error('Illegal svg');\n            }\n        }\n        this._defsUsePending = [];\n        var root = new Group();\n        this._root = root;\n        var named = [];\n        var viewBox = svg.getAttribute('viewBox') || '';\n        var width = parseFloat((svg.getAttribute('width') || opt.width));\n        var height = parseFloat((svg.getAttribute('height') || opt.height));\n        isNaN(width) && (width = null);\n        isNaN(height) && (height = null);\n        parseAttributes(svg, root, null, true, false);\n        var child = svg.firstChild;\n        while (child) {\n            this._parseNode(child, root, named, null, false, false);\n            child = child.nextSibling;\n        }\n        applyDefs(this._defs, this._defsUsePending);\n        this._defsUsePending = [];\n        var viewBoxRect;\n        var viewBoxTransform;\n        if (viewBox) {\n            var viewBoxArr = splitNumberSequence(viewBox);\n            if (viewBoxArr.length >= 4) {\n                viewBoxRect = {\n                    x: parseFloat((viewBoxArr[0] || 0)),\n                    y: parseFloat((viewBoxArr[1] || 0)),\n                    width: parseFloat(viewBoxArr[2]),\n                    height: parseFloat(viewBoxArr[3])\n                };\n            }\n        }\n        if (viewBoxRect && width != null && height != null) {\n            viewBoxTransform = makeViewBoxTransform(viewBoxRect, { x: 0, y: 0, width: width, height: height });\n            if (!opt.ignoreViewBox) {\n                var elRoot = root;\n                root = new Group();\n                root.add(elRoot);\n                elRoot.scaleX = elRoot.scaleY = viewBoxTransform.scale;\n                elRoot.x = viewBoxTransform.x;\n                elRoot.y = viewBoxTransform.y;\n            }\n        }\n        if (!opt.ignoreRootClip && width != null && height != null) {\n            root.setClipPath(new Rect({\n                shape: { x: 0, y: 0, width: width, height: height }\n            }));\n        }\n        return {\n            root: root,\n            width: width,\n            height: height,\n            viewBoxRect: viewBoxRect,\n            viewBoxTransform: viewBoxTransform,\n            named: named\n        };\n    };\n    SVGParser.prototype._parseNode = function (xmlNode, parentGroup, named, namedFrom, isInDefs, isInText) {\n        var nodeName = xmlNode.nodeName.toLowerCase();\n        var el;\n        var namedFromForSub = namedFrom;\n        if (nodeName === 'defs') {\n            isInDefs = true;\n        }\n        if (nodeName === 'text') {\n            isInText = true;\n        }\n        if (nodeName === 'defs' || nodeName === 'switch') {\n            el = parentGroup;\n        }\n        else {\n            if (!isInDefs) {\n                var parser_1 = nodeParsers[nodeName];\n                if (parser_1 && hasOwn(nodeParsers, nodeName)) {\n                    el = parser_1.call(this, xmlNode, parentGroup);\n                    var nameAttr = xmlNode.getAttribute('name');\n                    if (nameAttr) {\n                        var newNamed = {\n                            name: nameAttr,\n                            namedFrom: null,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        };\n                        named.push(newNamed);\n                        if (nodeName === 'g') {\n                            namedFromForSub = newNamed;\n                        }\n                    }\n                    else if (namedFrom) {\n                        named.push({\n                            name: namedFrom.name,\n                            namedFrom: namedFrom,\n                            svgNodeTagLower: nodeName,\n                            el: el\n                        });\n                    }\n                    parentGroup.add(el);\n                }\n            }\n            var parser = paintServerParsers[nodeName];\n            if (parser && hasOwn(paintServerParsers, nodeName)) {\n                var def = parser.call(this, xmlNode);\n                var id = xmlNode.getAttribute('id');\n                if (id) {\n                    this._defs[id] = def;\n                }\n            }\n        }\n        if (el && el.isGroup) {\n            var child = xmlNode.firstChild;\n            while (child) {\n                if (child.nodeType === 1) {\n                    this._parseNode(child, el, named, namedFromForSub, isInDefs, isInText);\n                }\n                else if (child.nodeType === 3 && isInText) {\n                    this._parseText(child, el);\n                }\n                child = child.nextSibling;\n            }\n        }\n    };\n    SVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n        var text = new TSpan({\n            style: {\n                text: xmlNode.textContent\n            },\n            silent: true,\n            x: this._textX || 0,\n            y: this._textY || 0\n        });\n        inheritStyle(parentGroup, text);\n        parseAttributes(xmlNode, text, this._defsUsePending, false, false);\n        applyTextAlignment(text, parentGroup);\n        var textStyle = text.style;\n        var fontSize = textStyle.fontSize;\n        if (fontSize && fontSize < 9) {\n            textStyle.fontSize = 9;\n            text.scaleX *= fontSize / 9;\n            text.scaleY *= fontSize / 9;\n        }\n        var font = (textStyle.fontSize || textStyle.fontFamily) && [\n            textStyle.fontStyle,\n            textStyle.fontWeight,\n            (textStyle.fontSize || 12) + 'px',\n            textStyle.fontFamily || 'sans-serif'\n        ].join(' ');\n        textStyle.font = font;\n        var rect = text.getBoundingRect();\n        this._textX += rect.width;\n        parentGroup.add(text);\n        return text;\n    };\n    SVGParser.internalField = (function () {\n        nodeParsers = {\n            'g': function (xmlNode, parentGroup) {\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, false);\n                return g;\n            },\n            'rect': function (xmlNode, parentGroup) {\n                var rect = new Rect();\n                inheritStyle(parentGroup, rect);\n                parseAttributes(xmlNode, rect, this._defsUsePending, false, false);\n                rect.setShape({\n                    x: parseFloat(xmlNode.getAttribute('x') || '0'),\n                    y: parseFloat(xmlNode.getAttribute('y') || '0'),\n                    width: parseFloat(xmlNode.getAttribute('width') || '0'),\n                    height: parseFloat(xmlNode.getAttribute('height') || '0')\n                });\n                rect.silent = true;\n                return rect;\n            },\n            'circle': function (xmlNode, parentGroup) {\n                var circle = new Circle();\n                inheritStyle(parentGroup, circle);\n                parseAttributes(xmlNode, circle, this._defsUsePending, false, false);\n                circle.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    r: parseFloat(xmlNode.getAttribute('r') || '0')\n                });\n                circle.silent = true;\n                return circle;\n            },\n            'line': function (xmlNode, parentGroup) {\n                var line = new Line();\n                inheritStyle(parentGroup, line);\n                parseAttributes(xmlNode, line, this._defsUsePending, false, false);\n                line.setShape({\n                    x1: parseFloat(xmlNode.getAttribute('x1') || '0'),\n                    y1: parseFloat(xmlNode.getAttribute('y1') || '0'),\n                    x2: parseFloat(xmlNode.getAttribute('x2') || '0'),\n                    y2: parseFloat(xmlNode.getAttribute('y2') || '0')\n                });\n                line.silent = true;\n                return line;\n            },\n            'ellipse': function (xmlNode, parentGroup) {\n                var ellipse = new Ellipse();\n                inheritStyle(parentGroup, ellipse);\n                parseAttributes(xmlNode, ellipse, this._defsUsePending, false, false);\n                ellipse.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    rx: parseFloat(xmlNode.getAttribute('rx') || '0'),\n                    ry: parseFloat(xmlNode.getAttribute('ry') || '0')\n                });\n                ellipse.silent = true;\n                return ellipse;\n            },\n            'polygon': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polygon = new Polygon({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polygon);\n                parseAttributes(xmlNode, polygon, this._defsUsePending, false, false);\n                return polygon;\n            },\n            'polyline': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polyline = new Polyline({\n                    shape: {\n                        points: pointsArr || []\n                    },\n                    silent: true\n                });\n                inheritStyle(parentGroup, polyline);\n                parseAttributes(xmlNode, polyline, this._defsUsePending, false, false);\n                return polyline;\n            },\n            'image': function (xmlNode, parentGroup) {\n                var img = new ZRImage();\n                inheritStyle(parentGroup, img);\n                parseAttributes(xmlNode, img, this._defsUsePending, false, false);\n                img.setStyle({\n                    image: xmlNode.getAttribute('xlink:href') || xmlNode.getAttribute('href'),\n                    x: +xmlNode.getAttribute('x'),\n                    y: +xmlNode.getAttribute('y'),\n                    width: +xmlNode.getAttribute('width'),\n                    height: +xmlNode.getAttribute('height')\n                });\n                img.silent = true;\n                return img;\n            },\n            'text': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x') || '0';\n                var y = xmlNode.getAttribute('y') || '0';\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                this._textX = parseFloat(x) + parseFloat(dx);\n                this._textY = parseFloat(y) + parseFloat(dy);\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                return g;\n            },\n            'tspan': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x');\n                var y = xmlNode.getAttribute('y');\n                if (x != null) {\n                    this._textX = parseFloat(x);\n                }\n                if (y != null) {\n                    this._textY = parseFloat(y);\n                }\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defsUsePending, false, true);\n                this._textX += parseFloat(dx);\n                this._textY += parseFloat(dy);\n                return g;\n            },\n            'path': function (xmlNode, parentGroup) {\n                var d = xmlNode.getAttribute('d') || '';\n                var path = createFromString(d);\n                inheritStyle(parentGroup, path);\n                parseAttributes(xmlNode, path, this._defsUsePending, false, false);\n                path.silent = true;\n                return path;\n            }\n        };\n    })();\n    return SVGParser;\n}());\nvar paintServerParsers = {\n    'lineargradient': function (xmlNode) {\n        var x1 = parseInt(xmlNode.getAttribute('x1') || '0', 10);\n        var y1 = parseInt(xmlNode.getAttribute('y1') || '0', 10);\n        var x2 = parseInt(xmlNode.getAttribute('x2') || '10', 10);\n        var y2 = parseInt(xmlNode.getAttribute('y2') || '0', 10);\n        var gradient = new LinearGradient(x1, y1, x2, y2);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    },\n    'radialgradient': function (xmlNode) {\n        var cx = parseInt(xmlNode.getAttribute('cx') || '0', 10);\n        var cy = parseInt(xmlNode.getAttribute('cy') || '0', 10);\n        var r = parseInt(xmlNode.getAttribute('r') || '0', 10);\n        var gradient = new RadialGradient(cx, cy, r);\n        parsePaintServerUnit(xmlNode, gradient);\n        parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    }\n};\nfunction parsePaintServerUnit(xmlNode, gradient) {\n    var gradientUnits = xmlNode.getAttribute('gradientUnits');\n    if (gradientUnits === 'userSpaceOnUse') {\n        gradient.global = true;\n    }\n}\nfunction parseGradientColorStops(xmlNode, gradient) {\n    var stop = xmlNode.firstChild;\n    while (stop) {\n        if (stop.nodeType === 1\n            && stop.nodeName.toLocaleLowerCase() === 'stop') {\n            var offsetStr = stop.getAttribute('offset');\n            var offset = void 0;\n            if (offsetStr && offsetStr.indexOf('%') > 0) {\n                offset = parseInt(offsetStr, 10) / 100;\n            }\n            else if (offsetStr) {\n                offset = parseFloat(offsetStr);\n            }\n            else {\n                offset = 0;\n            }\n            var styleVals = {};\n            parseInlineStyle(stop, styleVals, styleVals);\n            var stopColor = styleVals.stopColor\n                || stop.getAttribute('stop-color')\n                || '#000000';\n            gradient.colorStops.push({\n                offset: offset,\n                color: stopColor\n            });\n        }\n        stop = stop.nextSibling;\n    }\n}\nfunction inheritStyle(parent, child) {\n    if (parent && parent.__inheritedStyle) {\n        if (!child.__inheritedStyle) {\n            child.__inheritedStyle = {};\n        }\n        defaults(child.__inheritedStyle, parent.__inheritedStyle);\n    }\n}\nfunction parsePoints(pointsString) {\n    var list = splitNumberSequence(pointsString);\n    var points = [];\n    for (var i = 0; i < list.length; i += 2) {\n        var x = parseFloat(list[i]);\n        var y = parseFloat(list[i + 1]);\n        points.push([x, y]);\n    }\n    return points;\n}\nfunction parseAttributes(xmlNode, el, defsUsePending, onlyInlineStyle, isTextGroup) {\n    var disp = el;\n    var inheritedStyle = disp.__inheritedStyle = disp.__inheritedStyle || {};\n    var selfStyle = {};\n    if (xmlNode.nodeType === 1) {\n        parseTransformAttribute(xmlNode, el);\n        parseInlineStyle(xmlNode, inheritedStyle, selfStyle);\n        if (!onlyInlineStyle) {\n            parseAttributeStyle(xmlNode, inheritedStyle, selfStyle);\n        }\n    }\n    disp.style = disp.style || {};\n    if (inheritedStyle.fill != null) {\n        disp.style.fill = getFillStrokeStyle(disp, 'fill', inheritedStyle.fill, defsUsePending);\n    }\n    if (inheritedStyle.stroke != null) {\n        disp.style.stroke = getFillStrokeStyle(disp, 'stroke', inheritedStyle.stroke, defsUsePending);\n    }\n    each([\n        'lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = parseFloat(inheritedStyle[propName]);\n        }\n    });\n    each([\n        'lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign'\n    ], function (propName) {\n        if (inheritedStyle[propName] != null) {\n            disp.style[propName] = inheritedStyle[propName];\n        }\n    });\n    if (isTextGroup) {\n        disp.__selfStyle = selfStyle;\n    }\n    if (inheritedStyle.lineDash) {\n        disp.style.lineDash = map(splitNumberSequence(inheritedStyle.lineDash), function (str) {\n            return parseFloat(str);\n        });\n    }\n    if (inheritedStyle.visibility === 'hidden' || inheritedStyle.visibility === 'collapse') {\n        disp.invisible = true;\n    }\n    if (inheritedStyle.display === 'none') {\n        disp.ignore = true;\n    }\n}\nfunction applyTextAlignment(text, parentGroup) {\n    var parentSelfStyle = parentGroup.__selfStyle;\n    if (parentSelfStyle) {\n        var textBaseline = parentSelfStyle.textBaseline;\n        var zrTextBaseline = textBaseline;\n        if (!textBaseline || textBaseline === 'auto') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'baseline') {\n            zrTextBaseline = 'alphabetic';\n        }\n        else if (textBaseline === 'before-edge' || textBaseline === 'text-before-edge') {\n            zrTextBaseline = 'top';\n        }\n        else if (textBaseline === 'after-edge' || textBaseline === 'text-after-edge') {\n            zrTextBaseline = 'bottom';\n        }\n        else if (textBaseline === 'central' || textBaseline === 'mathematical') {\n            zrTextBaseline = 'middle';\n        }\n        text.style.textBaseline = zrTextBaseline;\n    }\n    var parentInheritedStyle = parentGroup.__inheritedStyle;\n    if (parentInheritedStyle) {\n        var textAlign = parentInheritedStyle.textAlign;\n        var zrTextAlign = textAlign;\n        if (textAlign) {\n            if (textAlign === 'middle') {\n                zrTextAlign = 'center';\n            }\n            text.style.textAlign = zrTextAlign;\n        }\n    }\n}\nvar urlRegex = /^url\\(\\s*#(.*?)\\)/;\nfunction getFillStrokeStyle(el, method, str, defsUsePending) {\n    var urlMatch = str && str.match(urlRegex);\n    if (urlMatch) {\n        var url = trim(urlMatch[1]);\n        defsUsePending.push([el, method, url]);\n        return;\n    }\n    if (str === 'none') {\n        str = null;\n    }\n    return str;\n}\nfunction applyDefs(defs, defsUsePending) {\n    for (var i = 0; i < defsUsePending.length; i++) {\n        var item = defsUsePending[i];\n        item[0].style[item[1]] = defs[item[2]];\n    }\n}\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction splitNumberSequence(rawStr) {\n    return rawStr.match(numberReg) || [];\n}\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.eE,]*)\\)/g;\nvar DEGREE_TO_ANGLE = Math.PI / 180;\nfunction parseTransformAttribute(xmlNode, node) {\n    var transform = xmlNode.getAttribute('transform');\n    if (transform) {\n        transform = transform.replace(/,/g, ' ');\n        var transformOps_1 = [];\n        var mt = null;\n        transform.replace(transformRegex, function (str, type, value) {\n            transformOps_1.push(type, value);\n            return '';\n        });\n        for (var i = transformOps_1.length - 1; i > 0; i -= 2) {\n            var value = transformOps_1[i];\n            var type = transformOps_1[i - 1];\n            var valueArr = splitNumberSequence(value);\n            mt = mt || matrix.create();\n            switch (type) {\n                case 'translate':\n                    matrix.translate(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || '0')]);\n                    break;\n                case 'scale':\n                    matrix.scale(mt, mt, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || valueArr[0])]);\n                    break;\n                case 'rotate':\n                    matrix.rotate(mt, mt, -parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    break;\n                case 'skewX':\n                    var sx = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, 0, sx, 1, 0, 0], mt);\n                    break;\n                case 'skewY':\n                    var sy = Math.tan(parseFloat(valueArr[0]) * DEGREE_TO_ANGLE);\n                    matrix.mul(mt, [1, sy, 0, 1, 0, 0], mt);\n                    break;\n                case 'matrix':\n                    mt[0] = parseFloat(valueArr[0]);\n                    mt[1] = parseFloat(valueArr[1]);\n                    mt[2] = parseFloat(valueArr[2]);\n                    mt[3] = parseFloat(valueArr[3]);\n                    mt[4] = parseFloat(valueArr[4]);\n                    mt[5] = parseFloat(valueArr[5]);\n                    break;\n            }\n        }\n        node.setLocalTransform(mt);\n    }\n}\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\nfunction parseInlineStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    var style = xmlNode.getAttribute('style');\n    if (!style) {\n        return;\n    }\n    styleRegex.lastIndex = 0;\n    var styleRegResult;\n    while ((styleRegResult = styleRegex.exec(style)) != null) {\n        var svgStlAttr = styleRegResult[1];\n        var zrInheritableStlAttr = hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? INHERITABLE_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrInheritableStlAttr) {\n            inheritableStyleResult[zrInheritableStlAttr] = styleRegResult[2];\n        }\n        var zrSelfStlAttr = hasOwn(SELF_STYLE_ATTRIBUTES_MAP, svgStlAttr)\n            ? SELF_STYLE_ATTRIBUTES_MAP[svgStlAttr]\n            : null;\n        if (zrSelfStlAttr) {\n            selfStyleResult[zrSelfStlAttr] = styleRegResult[2];\n        }\n    }\n}\nfunction parseAttributeStyle(xmlNode, inheritableStyleResult, selfStyleResult) {\n    for (var i = 0; i < INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            inheritableStyleResult[INHERITABLE_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n    for (var i = 0; i < SELF_STYLE_ATTRIBUTES_MAP_KEYS.length; i++) {\n        var svgAttrName = SELF_STYLE_ATTRIBUTES_MAP_KEYS[i];\n        var attrValue = xmlNode.getAttribute(svgAttrName);\n        if (attrValue != null) {\n            selfStyleResult[SELF_STYLE_ATTRIBUTES_MAP[svgAttrName]] = attrValue;\n        }\n    }\n}\nexport function makeViewBoxTransform(viewBoxRect, boundingRect) {\n    var scaleX = boundingRect.width / viewBoxRect.width;\n    var scaleY = boundingRect.height / viewBoxRect.height;\n    var scale = Math.min(scaleX, scaleY);\n    return {\n        scale: scale,\n        x: -(viewBoxRect.x + viewBoxRect.width / 2) * scale + (boundingRect.x + boundingRect.width / 2),\n        y: -(viewBoxRect.y + viewBoxRect.height / 2) * scale + (boundingRect.y + boundingRect.height / 2)\n    };\n}\nexport function parseSVG(xml, opt) {\n    var parser = new SVGParser();\n    return parser.parse(xml, opt);\n}\nexport { parseXML };\n","import { isArray } from '../../core/util.js';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n    if (t * t < e) {\n        return;\n    }\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x0: -ox,\n        y0: -oy,\n        x1: cx0 * (radius / r - 1),\n        y1: cy0 * (radius / r - 1)\n    };\n}\nfunction normalizeCornerRadius(cr) {\n    var arr;\n    if (isArray(cr)) {\n        var len = cr.length;\n        if (!len) {\n            return cr;\n        }\n        if (len === 1) {\n            arr = [cr[0], cr[0], 0, 0];\n        }\n        else if (len === 2) {\n            arr = [cr[0], cr[0], cr[1], cr[1]];\n        }\n        else if (len === 3) {\n            arr = cr.concat(cr[2]);\n        }\n        else {\n            arr = cr;\n        }\n    }\n    else {\n        arr = [cr, cr, cr, cr];\n    }\n    return arr;\n}\nexport function buildPath(ctx, shape) {\n    var _a;\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n        return;\n    }\n    var cx = shape.cx, cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs(endAngle - startAngle);\n    var mod = arc > PI2 && arc % PI2;\n    mod > e && (arc = mod);\n    if (!(radius > e)) {\n        ctx.moveTo(cx, cy);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var icrStart = void 0;\n        var icrEnd = void 0;\n        var ocrStart = void 0;\n        var ocrEnd = void 0;\n        var ocrs = void 0;\n        var ocre = void 0;\n        var icrs = void 0;\n        var icre = void 0;\n        var ocrMax = void 0;\n        var icrMax = void 0;\n        var limitedOcrMax = void 0;\n        var limitedIcrMax = void 0;\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var hasArc = arc > e;\n        if (hasArc) {\n            var cornerRadius = shape.cornerRadius;\n            if (cornerRadius) {\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n            }\n            var halfRd = mathAbs(radius - innerRadius) / 2;\n            ocrs = mathMin(halfRd, ocrStart);\n            ocre = mathMin(halfRd, ocrEnd);\n            icrs = mathMin(halfRd, icrStart);\n            icre = mathMin(halfRd, icrEnd);\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\n            if (ocrMax > e || icrMax > e) {\n                xre = radius * mathCos(endAngle);\n                yre = radius * mathSin(endAngle);\n                xirs = innerRadius * mathCos(startAngle);\n                yirs = innerRadius * mathSin(startAngle);\n                if (arc < PI) {\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                    if (it_1) {\n                        var x0 = xrs - it_1[0];\n                        var y0 = yrs - it_1[1];\n                        var x1 = xre - it_1[0];\n                        var y1 = yre - it_1[1];\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\n                    }\n                }\n            }\n        }\n        if (!hasArc) {\n            ctx.moveTo(cx + xrs, cy + yrs);\n        }\n        else if (limitedOcrMax > e) {\n            var crStart = mathMin(ocrStart, limitedOcrMax);\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(cx + xrs, cy + yrs);\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !hasArc) {\n            ctx.lineTo(cx + xire, cy + yire);\n        }\n        else if (limitedIcrMax > e) {\n            var crStart = mathMin(icrStart, limitedIcrMax);\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(cx + xire, cy + yire);\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundSectorHelper from '../helper/roundSector.js';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n    }\n    return SectorShape;\n}());\nexport { SectorShape };\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","import { cubicSubdivide } from '../core/curve.js';\nimport PathProxy from '../core/PathProxy.js';\nvar CMD = PathProxy.CMD;\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArrayGroups = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArrayGroups.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArrayGroups.push(currentSubpath);\n    }\n    return bezierArrayGroups;\n}\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n    if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n        out.push(x3, y3);\n        return;\n    }\n    var PIXEL_DISTANCE = 2 / scale;\n    var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n    var dx = x3 - x0;\n    var dy = y3 - y0;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    dx /= d;\n    dy /= d;\n    var dx1 = x1 - x0;\n    var dy1 = y1 - y0;\n    var dx2 = x2 - x3;\n    var dy2 = y2 - y3;\n    var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n    var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n    if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n        out.push(x3, y3);\n        return;\n    }\n    var projLen1 = dx * dx1 + dy * dy1;\n    var projLen2 = -dx * dx2 - dy * dy2;\n    var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n    var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n    if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0\n        && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n        out.push(x3, y3);\n        return;\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n    cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n    adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n    adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\nexport function pathToPolygons(path, scale) {\n    var bezierArrayGroups = pathToBezierCurves(path);\n    var polygons = [];\n    scale = scale || 1;\n    for (var i = 0; i < bezierArrayGroups.length; i++) {\n        var beziers = bezierArrayGroups[i];\n        var polygon = [];\n        var x0 = beziers[0];\n        var y0 = beziers[1];\n        polygon.push(x0, y0);\n        for (var k = 2; k < beziers.length;) {\n            var x1 = beziers[k++];\n            var y1 = beziers[k++];\n            var x2 = beziers[k++];\n            var y2 = beziers[k++];\n            var x3 = beziers[k++];\n            var y3 = beziers[k++];\n            adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n            x0 = x3;\n            y0 = y3;\n        }\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n","import { fromPoints } from '../core/bbox.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Point from '../core/Point.js';\nimport { map } from '../core/util.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Sector from '../graphic/shape/Sector.js';\nimport { pathToPolygons } from './convertPath.js';\nimport { clonePath } from './path.js';\nfunction getDividingGrids(dimSize, rowDim, count) {\n    var rowSize = dimSize[rowDim];\n    var columnSize = dimSize[1 - rowDim];\n    var ratio = Math.abs(rowSize / columnSize);\n    var rowCount = Math.ceil(Math.sqrt(ratio * count));\n    var columnCount = Math.floor(count / rowCount);\n    if (columnCount === 0) {\n        columnCount = 1;\n        rowCount = count;\n    }\n    var grids = [];\n    for (var i = 0; i < rowCount; i++) {\n        grids.push(columnCount);\n    }\n    var currentCount = rowCount * columnCount;\n    var remained = count - currentCount;\n    if (remained > 0) {\n        for (var i = 0; i < remained; i++) {\n            grids[i % rowCount] += 1;\n        }\n    }\n    return grids;\n}\nfunction divideSector(sectorShape, count, outShapes) {\n    var r0 = sectorShape.r0;\n    var r = sectorShape.r;\n    var startAngle = sectorShape.startAngle;\n    var endAngle = sectorShape.endAngle;\n    var angle = Math.abs(endAngle - startAngle);\n    var arcLen = angle * r;\n    var deltaR = r - r0;\n    var isAngleRow = arcLen > Math.abs(deltaR);\n    var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n    var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            if (isAngleRow) {\n                newShape.startAngle = startAngle + rowSize * row;\n                newShape.endAngle = startAngle + rowSize * (row + 1);\n                newShape.r0 = r0 + columnSize * column;\n                newShape.r = r0 + columnSize * (column + 1);\n            }\n            else {\n                newShape.startAngle = startAngle + columnSize * column;\n                newShape.endAngle = startAngle + columnSize * (column + 1);\n                newShape.r0 = r0 + rowSize * row;\n                newShape.r = r0 + rowSize * (row + 1);\n            }\n            newShape.clockwise = sectorShape.clockwise;\n            newShape.cx = sectorShape.cx;\n            newShape.cy = sectorShape.cy;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction divideRect(rectShape, count, outShapes) {\n    var width = rectShape.width;\n    var height = rectShape.height;\n    var isHorizontalRow = width > height;\n    var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n    var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n    var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n    var rowDim = isHorizontalRow ? 'x' : 'y';\n    var columnDim = isHorizontalRow ? 'y' : 'x';\n    var rowSize = rectShape[rowSizeDim] / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = rectShape[columnSizeDim] / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            newShape[rowDim] = row * rowSize;\n            newShape[columnDim] = column * columnSize;\n            newShape[rowSizeDim] = rowSize;\n            newShape[columnSizeDim] = columnSize;\n            newShape.x += rectShape.x;\n            newShape.y += rectShape.y;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n}\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y;\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n    if (Math.abs(nmCrossProduct) < 1e-6) {\n        return null;\n    }\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n    if (p < 0 || p > 1) {\n        return null;\n    }\n    return new Point(p * mx + a1x, p * my + a1y);\n}\nfunction projPtOnLine(pt, lineA, lineB) {\n    var dir = new Point();\n    Point.sub(dir, lineB, lineA);\n    dir.normalize();\n    var dir2 = new Point();\n    Point.sub(dir2, pt, lineA);\n    var len = dir2.dot(dir);\n    return len;\n}\nfunction addToPoly(poly, pt) {\n    var last = poly[poly.length - 1];\n    if (last && last[0] === pt[0] && last[1] === pt[1]) {\n        return;\n    }\n    poly.push(pt);\n}\nfunction splitPolygonByLine(points, lineA, lineB) {\n    var len = points.length;\n    var intersections = [];\n    for (var i = 0; i < len; i++) {\n        var p0 = points[i];\n        var p1 = points[(i + 1) % len];\n        var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n        if (intersectionPt) {\n            intersections.push({\n                projPt: projPtOnLine(intersectionPt, lineA, lineB),\n                pt: intersectionPt,\n                idx: i\n            });\n        }\n    }\n    if (intersections.length < 2) {\n        return [{ points: points }, { points: points }];\n    }\n    intersections.sort(function (a, b) {\n        return a.projPt - b.projPt;\n    });\n    var splitPt0 = intersections[0];\n    var splitPt1 = intersections[intersections.length - 1];\n    if (splitPt1.idx < splitPt0.idx) {\n        var tmp = splitPt0;\n        splitPt0 = splitPt1;\n        splitPt1 = tmp;\n    }\n    var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n    var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n    var newPolyA = [splitPt0Arr];\n    var newPolyB = [splitPt1Arr];\n    for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n        addToPoly(newPolyA, points[i].slice());\n    }\n    addToPoly(newPolyA, splitPt1Arr);\n    addToPoly(newPolyA, splitPt0Arr);\n    for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n        addToPoly(newPolyB, points[i % len].slice());\n    }\n    addToPoly(newPolyB, splitPt0Arr);\n    addToPoly(newPolyB, splitPt1Arr);\n    return [{\n            points: newPolyA\n        }, {\n            points: newPolyB\n        }];\n}\nfunction binaryDividePolygon(polygonShape) {\n    var points = polygonShape.points;\n    var min = [];\n    var max = [];\n    fromPoints(points, min, max);\n    var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    var width = boundingRect.width;\n    var height = boundingRect.height;\n    var x = boundingRect.x;\n    var y = boundingRect.y;\n    var pt0 = new Point();\n    var pt1 = new Point();\n    if (width > height) {\n        pt0.x = pt1.x = x + width / 2;\n        pt0.y = y;\n        pt1.y = y + height;\n    }\n    else {\n        pt0.y = pt1.y = y + height / 2;\n        pt0.x = x;\n        pt1.x = x + width;\n    }\n    return splitPolygonByLine(points, pt0, pt1);\n}\nfunction binaryDivideRecursive(divider, shape, count, out) {\n    if (count === 1) {\n        out.push(shape);\n    }\n    else {\n        var mid = Math.floor(count / 2);\n        var sub = divider(shape);\n        binaryDivideRecursive(divider, sub[0], mid, out);\n        binaryDivideRecursive(divider, sub[1], count - mid, out);\n    }\n    return out;\n}\nexport function clone(path, count) {\n    var paths = [];\n    for (var i = 0; i < count; i++) {\n        paths.push(clonePath(path));\n    }\n    return paths;\n}\nfunction copyPathProps(source, target) {\n    target.setStyle(source.style);\n    target.z = source.z;\n    target.z2 = source.z2;\n    target.zlevel = source.zlevel;\n}\nfunction polygonConvert(points) {\n    var out = [];\n    for (var i = 0; i < points.length;) {\n        out.push([points[i++], points[i++]]);\n    }\n    return out;\n}\nexport function split(path, count) {\n    var outShapes = [];\n    var shape = path.shape;\n    var OutShapeCtor;\n    switch (path.type) {\n        case 'rect':\n            divideRect(shape, count, outShapes);\n            OutShapeCtor = Rect;\n            break;\n        case 'sector':\n            divideSector(shape, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        case 'circle':\n            divideSector({\n                r0: 0, r: shape.r, startAngle: 0, endAngle: Math.PI * 2,\n                cx: shape.cx, cy: shape.cy\n            }, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        default:\n            var m = path.getComputedTransform();\n            var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n            var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) { return polygonConvert(poly); });\n            var polygonCount = polygons.length;\n            if (polygonCount === 0) {\n                binaryDivideRecursive(binaryDividePolygon, {\n                    points: polygons[0]\n                }, count, outShapes);\n            }\n            else if (polygonCount === count) {\n                for (var i = 0; i < polygonCount; i++) {\n                    outShapes.push({\n                        points: polygons[i]\n                    });\n                }\n            }\n            else {\n                var totalArea_1 = 0;\n                var items = map(polygons, function (poly) {\n                    var min = [];\n                    var max = [];\n                    fromPoints(poly, min, max);\n                    var area = (max[1] - min[1]) * (max[0] - min[0]);\n                    totalArea_1 += area;\n                    return { poly: poly, area: area };\n                });\n                items.sort(function (a, b) { return b.area - a.area; });\n                var left = count;\n                for (var i = 0; i < polygonCount; i++) {\n                    var item = items[i];\n                    if (left <= 0) {\n                        break;\n                    }\n                    var selfCount = i === polygonCount - 1\n                        ? left\n                        : Math.ceil(item.area / totalArea_1 * count);\n                    if (selfCount < 0) {\n                        continue;\n                    }\n                    binaryDivideRecursive(binaryDividePolygon, {\n                        points: item.poly\n                    }, selfCount, outShapes);\n                    left -= selfCount;\n                }\n                ;\n            }\n            OutShapeCtor = Polygon;\n            break;\n    }\n    if (!OutShapeCtor) {\n        return clone(path, count);\n    }\n    var out = [];\n    for (var i = 0; i < outShapes.length; i++) {\n        var subPath = new OutShapeCtor();\n        subPath.setShape(outShapes[i]);\n        copyPathProps(path, subPath);\n        out.push(subPath);\n    }\n    return out;\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport Path from '../graphic/Path.js';\nimport { defaults, map } from '../core/util.js';\nimport { lerp } from '../core/vector.js';\nimport { clonePath } from './path.js';\nimport Transformable from '../core/Transformable.js';\nimport { split } from './dividePath.js';\nimport { pathToBezierCurves } from './convertPath.js';\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr[k] = newX1;\n                    tmpArr[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr.length; m++) {\n                        newToSubpathBezier[m] = tmpArr[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function isCombineMorphing(path) {\n    return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n    return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    var originalMethod = obj[savedMethodName] || obj[methodName];\n    if (!obj[savedMethodName]) {\n        obj[savedMethodName] = obj[methodName];\n    }\n    var replace = modifiers.replace;\n    var after = modifiers.after;\n    var before = modifiers.before;\n    obj[methodName] = function () {\n        var args = arguments;\n        var res;\n        before && before.apply(this, args);\n        if (replace) {\n            res = replace.apply(this, args);\n        }\n        else {\n            res = originalMethod.apply(this, args);\n        }\n        after && after.apply(this, args);\n        return res;\n    };\n}\nfunction restoreMethod(obj, methodName) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    if (obj[savedMethodName]) {\n        obj[methodName] = obj[savedMethodName];\n        obj[savedMethodName] = null;\n    }\n}\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n    for (var i = 0; i < bezierCurves.length; i++) {\n        var subBeziers = bezierCurves[i];\n        for (var k = 0; k < subBeziers.length;) {\n            var x = subBeziers[k];\n            var y = subBeziers[k + 1];\n            subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n            subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n        }\n    }\n}\nfunction prepareMorphPath(fromPath, toPath) {\n    var fromPathProxy = fromPath.getUpdatedPathProxy();\n    var toPathProxy = toPath.getUpdatedPathProxy();\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var fromPathTransform = fromPath.getComputedTransform();\n    var toPathTransform = toPath.getComputedTransform();\n    function updateIdentityTransform() {\n        this.transform = null;\n    }\n    fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n    toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n    saveAndModifyMethod(toPath, 'updateTransform', { replace: updateIdentityTransform });\n    toPath.transform = null;\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    var tmpArr = [];\n    saveAndModifyMethod(toPath, 'buildPath', { replace: function (path) {\n            var t = toPath.__morphT;\n            var onet = 1 - t;\n            var newCp = [];\n            for (var i = 0; i < morphingData.length; i++) {\n                var item = morphingData[i];\n                var from = item.from;\n                var to = item.to;\n                var angle = item.rotation * t;\n                var fromCp = item.fromCp;\n                var toCp = item.toCp;\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                lerp(newCp, fromCp, toCp, t);\n                for (var m = 0; m < from.length; m += 2) {\n                    var x0_1 = from[m];\n                    var y0_1 = from[m + 1];\n                    var x1 = to[m];\n                    var y1 = to[m + 1];\n                    var x = x0_1 * onet + x1 * t;\n                    var y = y0_1 * onet + y1 * t;\n                    tmpArr[m] = (x * ca - y * sa) + newCp[0];\n                    tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n                }\n                var x0 = tmpArr[0];\n                var y0 = tmpArr[1];\n                path.moveTo(x0, y0);\n                for (var m = 2; m < from.length;) {\n                    var x1 = tmpArr[m++];\n                    var y1 = tmpArr[m++];\n                    var x2 = tmpArr[m++];\n                    var y2 = tmpArr[m++];\n                    var x3 = tmpArr[m++];\n                    var y3 = tmpArr[m++];\n                    if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n                        path.lineTo(x3, y3);\n                    }\n                    else {\n                        path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    }\n                    x0 = x3;\n                    y0 = y3;\n                }\n            }\n        } });\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    prepareMorphPath(fromPath, toPath);\n    toPath.__morphT = 0;\n    function restoreToPath() {\n        restoreMethod(toPath, 'buildPath');\n        restoreMethod(toPath, 'updateTransform');\n        toPath.__morphT = -1;\n        toPath.createPathProxy();\n        toPath.dirtyShape();\n    }\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreToPath();\n            oldDone && oldDone();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n    var bits = 16;\n    x = (maxX === minX) ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n    y = (maxY === minY) ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n    var d = 0;\n    var tmp;\n    for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n        var rx = 0;\n        var ry = 0;\n        if ((x & s) > 0) {\n            rx = 1;\n        }\n        if ((y & s) > 0) {\n            ry = 1;\n        }\n        d += s * s * ((3 * rx) ^ ry);\n        if (ry === 0) {\n            if (rx === 1) {\n                x = s - 1 - x;\n                y = s - 1 - y;\n            }\n            tmp = x;\n            x = y;\n            y = tmp;\n        }\n    }\n    return d;\n}\nfunction sortPaths(pathList) {\n    var xMin = Infinity;\n    var yMin = Infinity;\n    var xMax = -Infinity;\n    var yMax = -Infinity;\n    var cps = map(pathList, function (path) {\n        var rect = path.getBoundingRect();\n        var m = path.getComputedTransform();\n        var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n        var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n        xMin = Math.min(x, xMin);\n        yMin = Math.min(y, yMin);\n        xMax = Math.max(x, xMax);\n        yMax = Math.max(y, yMax);\n        return [x, y];\n    });\n    var items = map(cps, function (cp, idx) {\n        return {\n            cp: cp,\n            z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n            path: pathList[idx]\n        };\n    });\n    return items.sort(function (a, b) { return a.z - b.z; }).map(function (item) { return item.path; });\n}\n;\nfunction defaultDividePath(param) {\n    return split(param.path, param.count);\n}\nfunction createEmptyReturn() {\n    return {\n        fromIndividuals: [],\n        toIndividuals: [],\n        count: 0\n    };\n}\nexport function combineMorph(fromList, toPath, animationOpts) {\n    var fromPathList = [];\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    addFromPath(fromList);\n    var separateCount = fromPathList.length;\n    if (!separateCount) {\n        return createEmptyReturn();\n    }\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    var toSubPathList = dividePath({\n        path: toPath, count: separateCount\n    });\n    if (toSubPathList.length !== separateCount) {\n        console.error('Invalid morphing: unmatched splitted path');\n        return createEmptyReturn();\n    }\n    fromPathList = sortPaths(fromPathList);\n    toSubPathList = sortPaths(toSubPathList);\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    var individualDelay = animationOpts.individualDelay;\n    var identityTransform = new Transformable();\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromPathList[i];\n        var to = toSubPathList[i];\n        to.parent = toPath;\n        to.copyTransform(identityTransform);\n        if (!individualDelay) {\n            prepareMorphPath(from, to);\n        }\n    }\n    toPath.__isCombineMorphing = true;\n    toPath.childrenRef = function () {\n        return toSubPathList;\n    };\n    function addToSubPathListToZr(zr) {\n        for (var i = 0; i < toSubPathList.length; i++) {\n            toSubPathList[i].addSelfToZr(zr);\n        }\n    }\n    saveAndModifyMethod(toPath, 'addSelfToZr', {\n        after: function (zr) {\n            addToSubPathListToZr(zr);\n        }\n    });\n    saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n        after: function (zr) {\n            for (var i = 0; i < toSubPathList.length; i++) {\n                toSubPathList[i].removeSelfFromZr(zr);\n            }\n        }\n    });\n    function restoreToPath() {\n        toPath.__isCombineMorphing = false;\n        toPath.__morphT = -1;\n        toPath.childrenRef = null;\n        restoreMethod(toPath, 'addSelfToZr');\n        restoreMethod(toPath, 'removeSelfFromZr');\n    }\n    var toLen = toSubPathList.length;\n    if (individualDelay) {\n        var animating_1 = toLen;\n        var eachDone = function () {\n            animating_1--;\n            if (animating_1 === 0) {\n                restoreToPath();\n                oldDone && oldDone();\n            }\n        };\n        for (var i = 0; i < toLen; i++) {\n            var indivdualAnimationOpts = individualDelay ? defaults({\n                delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n                done: eachDone\n            }, animationOpts) : animationOpts;\n            morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n        }\n    }\n    else {\n        toPath.__morphT = 0;\n        toPath.animateTo({\n            __morphT: 1\n        }, defaults({\n            during: function (p) {\n                for (var i = 0; i < toLen; i++) {\n                    var child = toSubPathList[i];\n                    child.__morphT = toPath.__morphT;\n                    child.dirtyShape();\n                }\n                oldDuring && oldDuring(p);\n            },\n            done: function () {\n                restoreToPath();\n                for (var i = 0; i < fromList.length; i++) {\n                    restoreMethod(fromList[i], 'updateTransform');\n                }\n                oldDone && oldDone();\n            }\n        }, animationOpts));\n    }\n    if (toPath.__zr) {\n        addToSubPathListToZr(toPath.__zr);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toSubPathList,\n        count: toLen\n    };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n    var toLen = toPathList.length;\n    var fromPathList = [];\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    if (isCombineMorphing(fromPath)) {\n        addFromPath(fromPath.childrenRef());\n        var fromLen = fromPathList.length;\n        if (fromLen < toLen) {\n            var k = 0;\n            for (var i = fromLen; i < toLen; i++) {\n                fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n            }\n        }\n        fromPathList.length = toLen;\n    }\n    else {\n        fromPathList = dividePath({ path: fromPath, count: toLen });\n        var fromPathTransform = fromPath.getComputedTransform();\n        for (var i = 0; i < fromPathList.length; i++) {\n            fromPathList[i].setLocalTransform(fromPathTransform);\n        }\n        if (fromPathList.length !== toLen) {\n            console.error('Invalid morphing: unmatched splitted path');\n            return createEmptyReturn();\n        }\n    }\n    fromPathList = sortPaths(fromPathList);\n    toPathList = sortPaths(toPathList);\n    var individualDelay = animationOpts.individualDelay;\n    for (var i = 0; i < toLen; i++) {\n        var indivdualAnimationOpts = individualDelay ? defaults({\n            delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n        }, animationOpts) : animationOpts;\n        morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathList.length\n    };\n}\nexport { split as defaultDividePath };\n","import { __extends } from \"tslib\";\nimport Path from './Path.js';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            var image_1 = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image_1.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image_1.__cachedImgObj = {\n                image: image_1,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","import * as imageHelper from '../helper/image.js';\nimport { extend, retrieve2, retrieve3, reduce } from '../../core/util.js';\nimport { getLineHeight, getWidth, parsePercent } from '../../contain/text.js';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        return '';\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n    return textLines.join('\\n');\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('国', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = getWidth(ellipsis, font);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n    if (!containerWidth) {\n        return '';\n    }\n    var lineWidth = getWidth(textLine, font);\n    if (lineWidth <= containerWidth) {\n        return textLine;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = getWidth(textLine, font);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    return textLine;\n}\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        var charCode = text.charCodeAt(i);\n        width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\n    }\n    return i;\n}\nexport function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!(style.backgroundColor);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        lines = lines.slice(0, lineCount);\n    }\n    if (text && truncate && width != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        for (var i = 0; i < lines.length; i++) {\n            lines[i] = truncateSingleLine(lines[i], options);\n        }\n    }\n    var outerHeight = height;\n    var contentWidth = 0;\n    for (var i = 0; i < lines.length; i++) {\n        contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n    if (width == null) {\n        width = contentWidth;\n    }\n    var outerWidth = contentWidth;\n    if (padding) {\n        outerHeight += padding[0] + padding[2];\n        outerWidth += padding[1] + padding[3];\n        width += padding[1] + padding[3];\n    }\n    if (bgColorDrawn) {\n        outerWidth = width;\n    }\n    return {\n        lines: lines,\n        height: height,\n        outerWidth: outerWidth,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentWidth: contentWidth,\n        contentHeight: contentHeight,\n        width: width\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n    if (!text) {\n        return contentBlock;\n    }\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || style.align;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = getWidth(token.text, font);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.width = token.contentWidth = getWidth(token.text, font);\n                    }\n                }\n                else {\n                    token.contentWidth = getWidth(token.text, font);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    if (stlPadding) {\n        contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n        contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    else {\n        strLines = str.split('\\n');\n    }\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : getWidth(text, font);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isLatin(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x21 && code <= 0x17F;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isLatin(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = getWidth(ch, font);\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (!lines.length && !line) {\n        line = text;\n        currentWord = '';\n        currentWordWidth = 0;\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nexport { ArcShape };\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as vec2 from '../../core/vector.js';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nexport { BezierCurveShape };\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 != null || cpy2 != null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar DropletShape = (function () {\n    function DropletShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return DropletShape;\n}());\nexport { DropletShape };\nvar Droplet = (function (_super) {\n    __extends(Droplet, _super);\n    function Droplet(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Droplet.prototype.getDefaultShape = function () {\n        return new DropletShape();\n    };\n    Droplet.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.width;\n        var b = shape.height;\n        ctx.moveTo(x, y + a);\n        ctx.bezierCurveTo(x + a, y + a, x + a * 3 / 2, y - a / 3, x, y - b);\n        ctx.bezierCurveTo(x - a * 3 / 2, y - a / 3, x - a, y + a, x, y + a);\n        ctx.closePath();\n    };\n    return Droplet;\n}(Path));\nDroplet.prototype.type = 'droplet';\nexport default Droplet;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar HeartShape = (function () {\n    function HeartShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return HeartShape;\n}());\nexport { HeartShape };\nvar Heart = (function (_super) {\n    __extends(Heart, _super);\n    function Heart(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Heart.prototype.getDefaultShape = function () {\n        return new HeartShape();\n    };\n    Heart.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.width;\n        var b = shape.height;\n        ctx.moveTo(x, y);\n        ctx.bezierCurveTo(x + a / 2, y - b * 2 / 3, x + a * 2, y + b / 3, x, y + b);\n        ctx.bezierCurveTo(x - a * 2, y + b / 3, x - a / 2, y - b * 2 / 3, x, y);\n    };\n    return Heart;\n}(Path));\nHeart.prototype.type = 'heart';\nexport default Heart;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar PI = Math.PI;\nvar sin = Math.sin;\nvar cos = Math.cos;\nvar IsogonShape = (function () {\n    function IsogonShape() {\n        this.x = 0;\n        this.y = 0;\n        this.r = 0;\n        this.n = 0;\n    }\n    return IsogonShape;\n}());\nexport { IsogonShape };\nvar Isogon = (function (_super) {\n    __extends(Isogon, _super);\n    function Isogon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Isogon.prototype.getDefaultShape = function () {\n        return new IsogonShape();\n    };\n    Isogon.prototype.buildPath = function (ctx, shape) {\n        var n = shape.n;\n        if (!n || n < 2) {\n            return;\n        }\n        var x = shape.x;\n        var y = shape.y;\n        var r = shape.r;\n        var dStep = 2 * PI / n;\n        var deg = -PI / 2;\n        ctx.moveTo(x + r * cos(deg), y + r * sin(deg));\n        for (var i = 0, end = n - 1; i < end; i++) {\n            deg += dStep;\n            ctx.lineTo(x + r * cos(deg), y + r * sin(deg));\n        }\n        ctx.closePath();\n        return;\n    };\n    return Isogon;\n}(Path));\nIsogon.prototype.type = 'isogon';\nexport default Isogon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nexport { RingShape };\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar sin = Math.sin;\nvar cos = Math.cos;\nvar radian = Math.PI / 180;\nvar RoseShape = (function () {\n    function RoseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = [];\n        this.k = 0;\n        this.n = 1;\n    }\n    return RoseShape;\n}());\nexport { RoseShape };\nvar Rose = (function (_super) {\n    __extends(Rose, _super);\n    function Rose(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rose.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Rose.prototype.getDefaultShape = function () {\n        return new RoseShape();\n    };\n    Rose.prototype.buildPath = function (ctx, shape) {\n        var R = shape.r;\n        var k = shape.k;\n        var n = shape.n;\n        var x0 = shape.cx;\n        var y0 = shape.cy;\n        var x;\n        var y;\n        var r;\n        ctx.moveTo(x0, y0);\n        for (var i = 0, len = R.length; i < len; i++) {\n            r = R[i];\n            for (var j = 0; j <= 360 * n; j++) {\n                x = r\n                    * sin(k / n * j % 360 * radian)\n                    * cos(j * radian)\n                    + x0;\n                y = r\n                    * sin(k / n * j % 360 * radian)\n                    * sin(j * radian)\n                    + y0;\n                ctx.lineTo(x, y);\n            }\n        }\n    };\n    return Rose;\n}(Path));\nRose.prototype.type = 'rose';\nexport default Rose;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar PI = Math.PI;\nvar cos = Math.cos;\nvar sin = Math.sin;\nvar StarShape = (function () {\n    function StarShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.n = 3;\n        this.r = 0;\n    }\n    return StarShape;\n}());\nexport { StarShape };\nvar Star = (function (_super) {\n    __extends(Star, _super);\n    function Star(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Star.prototype.getDefaultShape = function () {\n        return new StarShape();\n    };\n    Star.prototype.buildPath = function (ctx, shape) {\n        var n = shape.n;\n        if (!n || n < 2) {\n            return;\n        }\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = shape.r;\n        var r0 = shape.r0;\n        if (r0 == null) {\n            r0 = n > 4\n                ? r * cos(2 * PI / n) / cos(PI / n)\n                : r / 3;\n        }\n        var dStep = PI / n;\n        var deg = -PI / 2;\n        var xStart = x + r * cos(deg);\n        var yStart = y + r * sin(deg);\n        deg += dStep;\n        ctx.moveTo(xStart, yStart);\n        for (var i = 0, end = n * 2 - 1, ri = void 0; i < end; i++) {\n            ri = i % 2 === 0 ? r0 : r;\n            ctx.lineTo(x + ri * cos(deg), y + ri * sin(deg));\n            deg += dStep;\n        }\n        ctx.closePath();\n    };\n    return Star;\n}(Path));\nStar.prototype.type = 'star';\nexport default Star;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar cos = Math.cos;\nvar sin = Math.sin;\nvar TrochoidShape = (function () {\n    function TrochoidShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n        this.d = 0;\n        this.location = 'out';\n    }\n    return TrochoidShape;\n}());\nexport { TrochoidShape };\nvar Trochoid = (function (_super) {\n    __extends(Trochoid, _super);\n    function Trochoid(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Trochoid.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Trochoid.prototype.getDefaultShape = function () {\n        return new TrochoidShape();\n    };\n    Trochoid.prototype.buildPath = function (ctx, shape) {\n        var R = shape.r;\n        var r = shape.r0;\n        var d = shape.d;\n        var offsetX = shape.cx;\n        var offsetY = shape.cy;\n        var delta = shape.location === 'out' ? 1 : -1;\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (shape.location && R <= r) {\n            return;\n        }\n        var num = 0;\n        var i = 1;\n        var theta;\n        x1 = (R + delta * r) * cos(0)\n            - delta * d * cos(0) + offsetX;\n        y1 = (R + delta * r) * sin(0)\n            - d * sin(0) + offsetY;\n        ctx.moveTo(x1, y1);\n        do {\n            num++;\n        } while ((r * num) % (R + delta * r) !== 0);\n        do {\n            theta = Math.PI / 180 * i;\n            x2 = (R + delta * r) * cos(theta)\n                - delta * d * cos((R / r + delta) * theta)\n                + offsetX;\n            y2 = (R + delta * r) * sin(theta)\n                - d * sin((R / r + delta) * theta)\n                + offsetY;\n            ctx.lineTo(x2, y2);\n            i++;\n        } while (i <= (r * num) / (R + delta * r) * 360);\n    };\n    return Trochoid;\n}(Path));\nTrochoid.prototype.type = 'trochoid';\nexport default Trochoid;\n","var Pattern = (function () {\n    function Pattern(image, repeat) {\n        this.image = image;\n        this.repeat = repeat;\n        this.x = 0;\n        this.y = 0;\n        this.rotation = 0;\n        this.scaleX = 1;\n        this.scaleY = 1;\n    }\n    return Pattern;\n}());\nexport default Pattern;\n","import Point from './Point.js';\nvar extent = [0, 0];\nvar extent2 = [0, 0];\nvar minTv = new Point();\nvar maxTv = new Point();\nvar OrientedBoundingRect = (function () {\n    function OrientedBoundingRect(rect, transform) {\n        this._corners = [];\n        this._axes = [];\n        this._origin = [0, 0];\n        for (var i = 0; i < 4; i++) {\n            this._corners[i] = new Point();\n        }\n        for (var i = 0; i < 2; i++) {\n            this._axes[i] = new Point();\n        }\n        if (rect) {\n            this.fromBoundingRect(rect, transform);\n        }\n    }\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n        var corners = this._corners;\n        var axes = this._axes;\n        var x = rect.x;\n        var y = rect.y;\n        var x2 = x + rect.width;\n        var y2 = y + rect.height;\n        corners[0].set(x, y);\n        corners[1].set(x2, y);\n        corners[2].set(x2, y2);\n        corners[3].set(x, y2);\n        if (transform) {\n            for (var i = 0; i < 4; i++) {\n                corners[i].transform(transform);\n            }\n        }\n        Point.sub(axes[0], corners[1], corners[0]);\n        Point.sub(axes[1], corners[3], corners[0]);\n        axes[0].normalize();\n        axes[1].normalize();\n        for (var i = 0; i < 2; i++) {\n            this._origin[i] = axes[i].dot(corners[0]);\n        }\n    };\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n        var overlapped = true;\n        var noMtv = !mtv;\n        minTv.set(Infinity, Infinity);\n        maxTv.set(0, 0);\n        if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!noMtv) {\n            Point.copy(mtv, overlapped ? minTv : maxTv);\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n        var overlapped = true;\n        for (var i = 0; i < 2; i++) {\n            var axis = this._axes[i];\n            this._getProjMinMaxOnAxis(i, self._corners, extent);\n            this._getProjMinMaxOnAxis(i, other._corners, extent2);\n            if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n                overlapped = false;\n                if (noMtv) {\n                    return overlapped;\n                }\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) > maxTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(maxTv, axis, -dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(maxTv, axis, dist1 * inverse);\n                    }\n                }\n            }\n            else if (minTv) {\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) < minTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(minTv, axis, dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(minTv, axis, -dist1 * inverse);\n                    }\n                }\n            }\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n        var axis = this._axes[dim];\n        var origin = this._origin;\n        var proj = corners[0].dot(axis) + origin[dim];\n        var min = proj;\n        var max = proj;\n        for (var i = 1; i < corners.length; i++) {\n            var proj_1 = corners[i].dot(axis) + origin[dim];\n            min = Math.min(proj_1, min);\n            max = Math.max(proj_1, max);\n        }\n        out[0] = min;\n        out[1] = max;\n    };\n    return OrientedBoundingRect;\n}());\nexport default OrientedBoundingRect;\n","import { extend } from '../core/util.js';\nvar DebugRect = (function () {\n    function DebugRect(style) {\n        var dom = this.dom = document.createElement('div');\n        dom.className = 'ec-debug-dirty-rect';\n        style = extend({}, style);\n        extend(style, {\n            backgroundColor: 'rgba(0, 0, 255, 0.2)',\n            border: '1px solid #00f'\n        });\n        dom.style.cssText = \"\\nposition: absolute;\\nopacity: 0;\\ntransition: opacity 0.5s linear;\\npointer-events: none;\\n\";\n        for (var key in style) {\n            if (style.hasOwnProperty(key)) {\n                dom.style[key] = style[key];\n            }\n        }\n    }\n    DebugRect.prototype.update = function (rect) {\n        var domStyle = this.dom.style;\n        domStyle.width = rect.width + 'px';\n        domStyle.height = rect.height + 'px';\n        domStyle.left = rect.x + 'px';\n        domStyle.top = rect.y + 'px';\n    };\n    DebugRect.prototype.hide = function () {\n        this.dom.style.opacity = '0';\n    };\n    DebugRect.prototype.show = function (autoHideDelay) {\n        var _this = this;\n        clearTimeout(this._hideTimeout);\n        this.dom.style.opacity = '1';\n        this._hideTimeout = setTimeout(function () {\n            _this.hide();\n        }, autoHideDelay || 1000);\n    };\n    return DebugRect;\n}());\nexport default function showDebugDirtyRect(zr, opts) {\n    opts = opts || {};\n    var painter = zr.painter;\n    if (!painter.getLayers) {\n        throw new Error('Debug dirty rect can only been used on canvas renderer.');\n    }\n    if (painter.isSingleCanvas()) {\n        throw new Error('Debug dirty rect can only been used on zrender inited with container.');\n    }\n    var debugViewRoot = document.createElement('div');\n    debugViewRoot.style.cssText = \"\\nposition:absolute;\\nleft:0;\\ntop:0;\\nright:0;\\nbottom:0;\\npointer-events:none;\\n\";\n    debugViewRoot.className = 'ec-debug-dirty-rect-container';\n    var debugRects = [];\n    var dom = zr.dom;\n    dom.appendChild(debugViewRoot);\n    var computedStyle = getComputedStyle(dom);\n    if (computedStyle.position === 'static') {\n        dom.style.position = 'relative';\n    }\n    zr.on('rendered', function () {\n        if (painter.getLayers) {\n            var idx_1 = 0;\n            painter.eachBuiltinLayer(function (layer) {\n                if (!layer.debugGetPaintRects) {\n                    return;\n                }\n                var paintRects = layer.debugGetPaintRects();\n                for (var i = 0; i < paintRects.length; i++) {\n                    if (!paintRects[i].width || !paintRects[i].height) {\n                        continue;\n                    }\n                    if (!debugRects[idx_1]) {\n                        debugRects[idx_1] = new DebugRect(opts.style);\n                        debugViewRoot.appendChild(debugRects[idx_1].dom);\n                    }\n                    debugRects[idx_1].show(opts.autoHideDelay);\n                    debugRects[idx_1].update(paintRects[i]);\n                    idx_1++;\n                }\n            });\n            for (var i = idx_1; i < debugRects.length; i++) {\n                debugRects[i].hide();\n            }\n        }\n    });\n}\n","import * as zrUtil from './core/util.js';\nimport * as matrix from './core/matrix.js';\nimport * as vector from './core/vector.js';\nimport * as colorTool from './tool/color.js';\nimport * as pathTool from './tool/path.js';\nimport { parseSVG } from './tool/parseSVG.js';\nimport * as morphPathTool from './tool/morphPath.js';\nexport { default as Point } from './core/Point.js';\nexport { default as Element } from './Element.js';\nexport { default as Displayable } from './graphic/Displayable.js';\nexport { default as Group } from './graphic/Group.js';\nexport { default as Path } from './graphic/Path.js';\nexport { default as Image } from './graphic/Image.js';\nexport { default as CompoundPath } from './graphic/CompoundPath.js';\nexport { default as TSpan } from './graphic/TSpan.js';\nexport { default as IncrementalDisplayable } from './graphic/IncrementalDisplayable.js';\nexport { default as Text } from './graphic/Text.js';\nexport { default as Arc, ArcShape } from './graphic/shape/Arc.js';\nexport { default as BezierCurve, BezierCurveShape } from './graphic/shape/BezierCurve.js';\nexport { default as Circle, CircleShape } from './graphic/shape/Circle.js';\nexport { default as Droplet, DropletShape } from './graphic/shape/Droplet.js';\nexport { default as Ellipse, EllipseShape } from './graphic/shape/Ellipse.js';\nexport { default as Heart, HeartShape } from './graphic/shape/Heart.js';\nexport { default as Isogon, IsogonShape } from './graphic/shape/Isogon.js';\nexport { default as Line, LineShape } from './graphic/shape/Line.js';\nexport { default as Polygon, PolygonShape } from './graphic/shape/Polygon.js';\nexport { default as Polyline, PolylineShape } from './graphic/shape/Polyline.js';\nexport { default as Rect, RectShape } from './graphic/shape/Rect.js';\nexport { default as Ring, RingShape } from './graphic/shape/Ring.js';\nexport { default as Rose, RoseShape } from './graphic/shape/Rose.js';\nexport { default as Sector, SectorShape } from './graphic/shape/Sector.js';\nexport { default as Star, StarShape } from './graphic/shape/Star.js';\nexport { default as Trochoid, TrochoidShape } from './graphic/shape/Trochoid.js';\nexport { default as LinearGradient } from './graphic/LinearGradient.js';\nexport { default as RadialGradient } from './graphic/RadialGradient.js';\nexport { default as Pattern } from './graphic/Pattern.js';\nexport { default as BoundingRect } from './core/BoundingRect.js';\nexport { default as OrientedBoundingRect } from './core/OrientedBoundingRect.js';\nexport { matrix };\nexport { vector };\nexport { colorTool as color };\nexport { pathTool as path };\nexport { zrUtil as util };\nexport { morphPathTool as morph };\nexport { parseSVG };\nexport { default as showDebugDirtyRect } from './debug/showDebugDirtyRect.js';\nexport { setPlatformAPI } from './core/platform.js';\n","export function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isNaN(x) ? 0 : x;\n    x2 = isNaN(x2) ? 1 : x2;\n    y = isNaN(y) ? 0 : y;\n    y2 = isNaN(y2) ? 0 : y2;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","import { isAroundZero } from './helper.js';\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function (precision) {\n        this._start = true;\n        this._d = [];\n        this._str = '';\n        this._p = Math.pow(10, precision || 4);\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = cx + rx * mathCos(startAngle);\n        var y0 = cy + ry * mathSin(startAngle);\n        if (this._start) {\n            this._add('M', x0, y0);\n        }\n        var xRot = Math.round(psi * degree);\n        if (isCircle) {\n            var p = 1 / this._p;\n            var dTheta_1 = (clockwise ? 1 : -1) * (PI2 - p);\n            this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos(startAngle + dTheta_1), cy + ry * mathSin(startAngle + dTheta_1));\n            if (p > 1e-2) {\n                this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n            }\n        }\n        else {\n            var x = cx + rx * mathCos(endAngle);\n            var y = cy + ry * mathSin(endAngle);\n            this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n        }\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('l', w, 0);\n        this._add('l', 0, h);\n        this._add('l', -w, 0);\n        this._add('Z');\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        var vals = [];\n        var p = this._p;\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            vals.push(Math.round(val * p) / p);\n        }\n        this._d.push(cmd + vals.join(' '));\n        this._start = cmd === 'Z';\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join('');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nexport default SVGPathRebuilder;\n","import { DEFAULT_PATH_STYLE } from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineDash } from '../canvas/dashStyle.js';\nimport { map } from '../core/util.js';\nimport { normalizeColor } from './helper.js';\nvar NONE = 'none';\nvar mathRound = Math.round;\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nvar strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\nvar svgStrokeProps = map(strokeProps, function (prop) { return \"stroke-\" + prop.toLowerCase(); });\nexport default function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        updateAttr('opacity', opacity);\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = normalizeColor(style.fill);\n        updateAttr('fill', fill.color);\n        var fillOpacity = style.fillOpacity != null\n            ? style.fillOpacity * fill.opacity * opacity\n            : fill.opacity * opacity;\n        if (forceUpdate || fillOpacity < 1) {\n            updateAttr('fill-opacity', fillOpacity);\n        }\n    }\n    else {\n        updateAttr('fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = normalizeColor(style.stroke);\n        updateAttr('stroke', stroke.color);\n        var strokeScale = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        var strokeWidth = (strokeScale ? (style.lineWidth || 0) / strokeScale : 0);\n        var strokeOpacity = style.strokeOpacity != null\n            ? style.strokeOpacity * stroke.opacity * opacity\n            : stroke.opacity * opacity;\n        var strokeFirst = style.strokeFirst;\n        if (forceUpdate || strokeWidth !== 1) {\n            updateAttr('stroke-width', strokeWidth);\n        }\n        if (forceUpdate || strokeFirst) {\n            updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n        }\n        if (forceUpdate || strokeOpacity < 1) {\n            updateAttr('stroke-opacity', strokeOpacity);\n        }\n        if (style.lineDash) {\n            var _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n            if (lineDash) {\n                lineDashOffset = mathRound(lineDashOffset || 0);\n                updateAttr('stroke-dasharray', lineDash.join(','));\n                if (lineDashOffset || forceUpdate) {\n                    updateAttr('stroke-dashoffset', lineDashOffset);\n                }\n            }\n        }\n        else if (forceUpdate) {\n            updateAttr('stroke-dasharray', NONE);\n        }\n        for (var i = 0; i < strokeProps.length; i++) {\n            var propName = strokeProps[i];\n            if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n                var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n                val && updateAttr(svgStrokeProps[i], val);\n            }\n        }\n    }\n    else if (forceUpdate) {\n        updateAttr('stroke', NONE);\n    }\n}\n","import { keys, map } from '../core/util.js';\nexport var SVGNS = 'http://www.w3.org/2000/svg';\nexport var XLINKNS = 'http://www.w3.org/1999/xlink';\nexport var XMLNS = 'http://www.w3.org/2000/xmlns/';\nexport var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\nexport function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n}\n;\nexport function createVNode(tag, key, attrs, children, text) {\n    return {\n        tag: tag,\n        attrs: attrs || {},\n        children: children,\n        text: text,\n        key: key\n    };\n}\nfunction createElementOpen(name, attrs) {\n    var attrsStr = [];\n    if (attrs) {\n        for (var key in attrs) {\n            var val = attrs[key];\n            var part = key;\n            if (val === false) {\n                continue;\n            }\n            else if (val !== true && val != null) {\n                part += \"=\\\"\" + val + \"\\\"\";\n            }\n            attrsStr.push(part);\n        }\n    }\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n}\nfunction createElementClose(name) {\n    return \"</\" + name + \">\";\n}\nexport function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    function convertElToString(el) {\n        var children = el.children, tag = el.tag, attrs = el.attrs;\n        return createElementOpen(tag, attrs)\n            + (el.text || '')\n            + (children ? \"\" + S + map(children, function (child) { return convertElToString(child); }).join(S) + S : '')\n            + createElementClose(tag);\n    }\n    return convertElToString(el);\n}\nexport function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n        return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n            return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n        }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n        return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n            return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n                var val = animationNodes[animationName][percent][attrName];\n                if (attrName === 'd') {\n                    val = \"path(\\\"\" + val + \"\\\")\";\n                }\n                return attrName + \":\" + val + \";\";\n            }).join(S) + bracketEnd;\n        }).join(S) + bracketEnd;\n    }).join(S);\n    if (!selectors && !animations) {\n        return '';\n    }\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n}\nexport function createBrushScope(zrId) {\n    return {\n        zrId: zrId,\n        shadowCache: {},\n        patternCache: {},\n        gradientCache: {},\n        clipPathCache: {},\n        defs: {},\n        cssNodes: {},\n        cssAnims: {},\n        cssClassIdx: 0,\n        cssAnimIdx: 0,\n        shadowIdx: 0,\n        gradientIdx: 0,\n        patternIdx: 0,\n        clipPathIdx: 0\n    };\n}\nexport function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n        'width': width,\n        'height': height,\n        'xmlns': SVGNS,\n        'xmlns:xlink': XLINKNS,\n        'version': '1.1',\n        'baseProfile': 'full',\n        'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n}\n","import { copyTransform } from '../core/Transformable.js';\nimport { createBrushScope } from './core.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { getPathPrecision, getSRTTransformString } from './helper.js';\nimport { each, extend, filter, isNumber, isString, keys } from '../core/util.js';\nimport CompoundPath from '../graphic/CompoundPath.js';\nimport { createCubicEasingFunc } from '../animation/cubicEasing.js';\nexport var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n};\nvar transformOriginKey = 'transform-origin';\nfunction buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n}\nfunction setTransformOrigin(target, transform) {\n    var originX = transform.originX, originY = transform.originY;\n    if (originX || originY) {\n        target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n}\nexport var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n};\nfunction addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n}\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n        var subScope = createBrushScope(scope.zrId);\n        subScope.animation = true;\n        createCSSAnimation(path, {}, subScope, true);\n        var cssAnims = subScope.cssAnims;\n        var cssNodes = subScope.cssNodes;\n        var animNames = keys(cssAnims);\n        var len = animNames.length;\n        if (!len) {\n            return;\n        }\n        cssAnimationName = animNames[len - 1];\n        var lastAnim = cssAnims[cssAnimationName];\n        for (var percent in lastAnim) {\n            var kf = lastAnim[percent];\n            composedAnim[percent] = composedAnim[percent] || { d: '' };\n            composedAnim[percent].d += kf.d || '';\n        }\n        for (var className in cssNodes) {\n            var val = cssNodes[className].animation;\n            if (val.indexOf(cssAnimationName) >= 0) {\n                cssAnimationCfg = val;\n            }\n        }\n    });\n    if (!cssAnimationCfg) {\n        return;\n    }\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\nfunction getEasingFunc(easing) {\n    return isString(easing)\n        ? EASING_MAP[easing]\n            ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\"\n            : createCubicEasingFunc(easing) ? easing : ''\n        : '';\n}\nexport function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n    if (el instanceof CompoundPath) {\n        var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n        else if (!len) {\n            return;\n        }\n    }\n    else if (!len) {\n        return;\n    }\n    var groupAnimators = {};\n    for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n        var easing = getEasingFunc(animator.getClip().easing);\n        var delay = animator.getDelay();\n        if (easing) {\n            cfgArr.push(easing);\n        }\n        else {\n            cfgArr.push('linear');\n        }\n        if (delay) {\n            cfgArr.push(delay / 1000 + 's');\n        }\n        if (animator.getLoop()) {\n            cfgArr.push('infinite');\n        }\n        var cfg = cfgArr.join(' ');\n        groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n        groupAnimators[cfg][1].push(animator);\n    }\n    function createSingleCSSAnimation(groupAnimator) {\n        var animators = groupAnimator[1];\n        var len = animators.length;\n        var transformKfs = {};\n        var shapeKfs = {};\n        var finalKfs = {};\n        var animationTimingFunctionAttrName = 'animation-timing-function';\n        function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n            var tracks = animator.getTracks();\n            var maxTime = animator.getMaxTime();\n            for (var k = 0; k < tracks.length; k++) {\n                var track = tracks[k];\n                if (track.needsAnimate()) {\n                    var kfs = track.keyframes;\n                    var attrName = track.propName;\n                    toCssAttrName && (attrName = toCssAttrName(attrName));\n                    if (attrName) {\n                        for (var i = 0; i < kfs.length; i++) {\n                            var kf = kfs[i];\n                            var percent = Math.round(kf.time / maxTime * 100) + '%';\n                            var kfEasing = getEasingFunc(kf.easing);\n                            var rawValue = kf.rawValue;\n                            if (isString(rawValue) || isNumber(rawValue)) {\n                                cssKfs[percent] = cssKfs[percent] || {};\n                                cssKfs[percent][attrName] = kf.rawValue;\n                                if (kfEasing) {\n                                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            var targetProp = animator.targetName;\n            if (!targetProp) {\n                !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n            }\n            else if (targetProp === 'shape') {\n                saveAnimatorTrackToCssKfs(animator, shapeKfs);\n            }\n        }\n        for (var percent in transformKfs) {\n            var transform = {};\n            copyTransform(transform, el);\n            extend(transform, transformKfs[percent]);\n            var str = getSRTTransformString(transform);\n            var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n            finalKfs[percent] = str ? {\n                transform: str\n            } : {};\n            setTransformOrigin(finalKfs[percent], transform);\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        var path;\n        var canAnimateShape = true;\n        for (var percent in shapeKfs) {\n            finalKfs[percent] = finalKfs[percent] || {};\n            var isFirst = !path;\n            var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n            if (isFirst) {\n                path = new PathProxy();\n            }\n            var len_1 = path.len();\n            path.reset();\n            finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n            var newLen = path.len();\n            if (!isFirst && len_1 !== newLen) {\n                canAnimateShape = false;\n                break;\n            }\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        if (!canAnimateShape) {\n            for (var percent in finalKfs) {\n                delete finalKfs[percent].d;\n            }\n        }\n        if (!onlyShape) {\n            for (var i = 0; i < len; i++) {\n                var animator = animators[i];\n                var targetProp = animator.targetName;\n                if (targetProp === 'style') {\n                    saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) { return ANIMATE_STYLE_MAP[propName]; });\n                }\n            }\n        }\n        var percents = keys(finalKfs);\n        var allTransformOriginSame = true;\n        var transformOrigin;\n        for (var i = 1; i < percents.length; i++) {\n            var p0 = percents[i - 1];\n            var p1 = percents[i];\n            if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n                allTransformOriginSame = false;\n                break;\n            }\n            transformOrigin = finalKfs[p0][transformOriginKey];\n        }\n        if (allTransformOriginSame && transformOrigin) {\n            for (var percent in finalKfs) {\n                if (finalKfs[percent][transformOriginKey]) {\n                    delete finalKfs[percent][transformOriginKey];\n                }\n            }\n            attrs[transformOriginKey] = transformOrigin;\n        }\n        if (filter(percents, function (percent) { return keys(finalKfs[percent]).length > 0; }).length) {\n            var animationName = addAnimation(finalKfs, scope);\n            return animationName + \" \" + groupAnimator[0] + \" both\";\n        }\n    }\n    for (var key in groupAnimators) {\n        var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n    }\n    if (cssAnimations.length) {\n        var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n        scope.cssNodes['.' + className] = {\n            animation: cssAnimations.join(',')\n        };\n        attrs[\"class\"] = className;\n    }\n}\n","import { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineHeight } from '../contain/text.js';\nimport TSpan from '../graphic/TSpan.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\nimport { createVNode, vNodeToString } from './core.js';\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\nimport { createCSSAnimation } from './cssAnimation.js';\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\nvar round = Math.round;\nfunction isImageLike(val) {\n    return val && isString(val.src);\n}\nfunction isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n}\nfunction setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n        var isFillStroke = key === 'fill' || key === 'stroke';\n        if (isFillStroke && isGradient(val)) {\n            setGradient(style, attrs, key, scope);\n        }\n        else if (isFillStroke && isPattern(val)) {\n            setPattern(el, attrs, key, scope);\n        }\n        else {\n            attrs[key] = val;\n        }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n}\nfunction noRotateScale(m) {\n    return isAroundZero(m[0] - 1)\n        && isAroundZero(m[1])\n        && isAroundZero(m[2])\n        && isAroundZero(m[3] - 1);\n}\nfunction noTranslate(m) {\n    return isAroundZero(m[4]) && isAroundZero(m[5]);\n}\nfunction setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n        var mul = compress ? 10 : 1e4;\n        attrs.transform = noRotateScale(m)\n            ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n}\nfunction convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n    for (var i = 0; i < points.length; i++) {\n        strArr.push(round(points[i][0] * mul) / mul);\n        strArr.push(round(points[i][1] * mul) / mul);\n    }\n    attrs.points = strArr.join(' ');\n}\nfunction validatePolyShape(shape) {\n    return !shape.smooth;\n}\nfunction createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n        return (typeof item === 'string' ? [item, item] : item);\n    });\n    return function (shape, attrs, mul) {\n        for (var i = 0; i < normalizedDesc.length; i++) {\n            var item = normalizedDesc[i];\n            var val = shape[item[0]];\n            if (val != null) {\n                attrs[item[1]] = round(val * mul) / mul;\n            }\n        }\n    };\n}\nvar buitinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n};\nfunction hasShapeAnimation(el) {\n    var animators = el.animators;\n    for (var i = 0; i < animators.length; i++) {\n        if (animators[i].targetName === 'shape') {\n            return true;\n        }\n    }\n    return false;\n}\nexport function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = buitinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = (scope.compress && getPathPrecision(el)) || 4;\n    if (builtinShpDef\n        && !scope.willUpdate\n        && !(builtinShpDef[1] && !builtinShpDef[1](shape))\n        && !(needsAnimate && hasShapeAnimation(el))\n        && !(strokePercent < 1)) {\n        svgElType = el.type;\n        var mul = Math.pow(10, precision);\n        builtinShpDef[0](shape, attrs, mul);\n    }\n    else {\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (el.shapeChanged()) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion\n            || !svgPathBuilder\n            || strokePercent !== elExt.__svgPathStrokePercent) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset(precision);\n            path.rebuildPath(svgPathBuilder, strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n            elExt.__svgPathStrokePercent = strokePercent;\n        }\n        attrs.d = svgPathBuilder.getStr();\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n}\nexport function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n    if (image && !isString(image)) {\n        if (isImageLike(image)) {\n            image = image.src;\n        }\n        else if (isCanvasLike(image)) {\n            image = image.toDataURL();\n        }\n    }\n    if (!image) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n        href: image,\n        width: dw,\n        height: dh\n    };\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n}\n;\nexport function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n        return;\n    }\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n        || style.textAlign;\n    var attrs = {\n        'dominant-baseline': 'central',\n        'text-anchor': textAlign\n    };\n    if (hasSeparateFont(style)) {\n        var separatedFontStr = '';\n        var fontStyle = style.fontStyle;\n        var fontSize = parseFontSize(style.fontSize);\n        if (!parseFloat(fontSize)) {\n            return;\n        }\n        var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n        var fontWeight = style.fontWeight;\n        separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n        if (fontStyle && fontStyle !== 'normal') {\n            separatedFontStr += \"font-style:\" + fontStyle + \";\";\n        }\n        if (fontWeight && fontWeight !== 'normal') {\n            separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n        }\n        attrs.style = separatedFontStr;\n    }\n    else {\n        attrs.style = \"font: \" + font;\n    }\n    if (text.match(/\\s/)) {\n        attrs['xml:space'] = 'preserve';\n    }\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n}\nexport function brush(el, scope) {\n    if (el instanceof Path) {\n        return brushSVGPath(el, scope);\n    }\n    else if (el instanceof ZRImage) {\n        return brushSVGImage(el, scope);\n    }\n    else if (el instanceof TSpan) {\n        return brushSVGTSpan(el, scope);\n    }\n}\nfunction setShadow(el, attrs, scope) {\n    var style = el.style;\n    if (hasShadow(style)) {\n        var shadowKey = getShadowKey(el);\n        var shadowCache = scope.shadowCache;\n        var shadowId = shadowCache[shadowKey];\n        if (!shadowId) {\n            var globalScale = el.getGlobalScale();\n            var scaleX = globalScale[0];\n            var scaleY = globalScale[1];\n            if (!scaleX || !scaleY) {\n                return;\n            }\n            var offsetX = style.shadowOffsetX || 0;\n            var offsetY = style.shadowOffsetY || 0;\n            var blur_1 = style.shadowBlur;\n            var _a = normalizeColor(style.shadowColor), opacity = _a.opacity, color = _a.color;\n            var stdDx = blur_1 / 2 / scaleX;\n            var stdDy = blur_1 / 2 / scaleY;\n            var stdDeviation = stdDx + ' ' + stdDy;\n            shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n            scope.defs[shadowId] = createVNode('filter', shadowId, {\n                'id': shadowId,\n                'x': '-100%',\n                'y': '-100%',\n                'width': '300%',\n                'height': '300%'\n            }, [\n                createVNode('feDropShadow', '', {\n                    'dx': offsetX / scaleX,\n                    'dy': offsetY / scaleY,\n                    'stdDeviation': stdDeviation,\n                    'flood-color': color,\n                    'flood-opacity': opacity\n                })\n            ]);\n            shadowCache[shadowKey] = shadowId;\n        }\n        attrs.filter = getIdURL(shadowId);\n    }\n}\nfunction setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n        'gradientUnits': val.global\n            ? 'userSpaceOnUse'\n            : 'objectBoundingBox'\n    };\n    if (isLinearGradient(val)) {\n        gradientTag = 'linearGradient';\n        gradientAttrs.x1 = val.x;\n        gradientAttrs.y1 = val.y;\n        gradientAttrs.x2 = val.x2;\n        gradientAttrs.y2 = val.y2;\n    }\n    else if (isRadialGradient(val)) {\n        gradientTag = 'radialGradient';\n        gradientAttrs.cx = retrieve2(val.x, 0.5);\n        gradientAttrs.cy = retrieve2(val.y, 0.5);\n        gradientAttrs.r = retrieve2(val.r, 0.5);\n    }\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Illegal gradient type.');\n        }\n        return;\n    }\n    var colors = val.colorStops;\n    var colorStops = [];\n    for (var i = 0, len = colors.length; i < len; ++i) {\n        var offset = round4(colors[i].offset) * 100 + '%';\n        var stopColor = colors[i].color;\n        var _a = normalizeColor(stopColor), color = _a.color, opacity = _a.opacity;\n        var stopsAttrs = {\n            'offset': offset\n        };\n        stopsAttrs['stop-color'] = color;\n        if (opacity < 1) {\n            stopsAttrs['stop-opacity'] = opacity;\n        }\n        colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n    if (!gradientId) {\n        gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n        gradientCache[gradientKey] = gradientId;\n        gradientAttrs.id = gradientId;\n        scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n    attrs[target] = getIdURL(gradientId);\n}\nfunction setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var patternAttrs = {\n        'patternUnits': 'userSpaceOnUse'\n    };\n    var child;\n    if (isImagePattern(val)) {\n        var imageWidth_1 = val.imageWidth;\n        var imageHeight_1 = val.imageHeight;\n        var imageSrc = void 0;\n        var patternImage = val.image;\n        if (isString(patternImage)) {\n            imageSrc = patternImage;\n        }\n        else if (isImageLike(patternImage)) {\n            imageSrc = patternImage.src;\n        }\n        else if (isCanvasLike(patternImage)) {\n            imageSrc = patternImage.toDataURL();\n        }\n        if (typeof Image === 'undefined') {\n            var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n            assert(imageWidth_1, errMsg);\n            assert(imageHeight_1, errMsg);\n        }\n        else if (imageWidth_1 == null || imageHeight_1 == null) {\n            var setSizeToVNode_1 = function (vNode, img) {\n                if (vNode) {\n                    var svgEl = vNode.elm;\n                    var width = (vNode.attrs.width = imageWidth_1 || img.width);\n                    var height = (vNode.attrs.height = imageHeight_1 || img.height);\n                    if (svgEl) {\n                        svgEl.setAttribute('width', width);\n                        svgEl.setAttribute('height', height);\n                    }\n                }\n            };\n            var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n                setSizeToVNode_1(patternVNode, img);\n                setSizeToVNode_1(child, img);\n            });\n            if (createdImage && createdImage.width && createdImage.height) {\n                imageWidth_1 = imageWidth_1 || createdImage.width;\n                imageHeight_1 = imageHeight_1 || createdImage.height;\n            }\n        }\n        child = createVNode('image', 'img', {\n            href: imageSrc,\n            width: imageWidth_1,\n            height: imageHeight_1\n        });\n        patternAttrs.width = imageWidth_1;\n        patternAttrs.height = imageHeight_1;\n    }\n    else if (val.svgElement) {\n        child = clone(val.svgElement);\n        patternAttrs.width = val.svgWidth;\n        patternAttrs.height = val.svgHeight;\n    }\n    if (!child) {\n        return;\n    }\n    patternAttrs.patternTransform = getSRTTransformString(val);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n    if (!patternId) {\n        patternId = scope.zrId + '-p' + scope.patternIdx++;\n        patternCache[patternKey] = patternId;\n        patternAttrs.id = patternId;\n        patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n    attrs[target] = getIdURL(patternId);\n}\nexport function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache, defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n    if (!clipPathId) {\n        clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n        var clipPathAttrs = {\n            id: clipPathId\n        };\n        clipPathCache[clipPath.id] = clipPathId;\n        defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n    attrs['clip-path'] = getIdURL(clipPathId);\n}\n","export function createTextNode(text) {\n    return document.createTextNode(text);\n}\nexport function createComment(text) {\n    return document.createComment(text);\n}\nexport function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nexport function removeChild(node, child) {\n    node.removeChild(child);\n}\nexport function appendChild(node, child) {\n    node.appendChild(child);\n}\nexport function parentNode(node) {\n    return node.parentNode;\n}\nexport function nextSibling(node) {\n    return node.nextSibling;\n}\nexport function tagName(elm) {\n    return elm.tagName;\n}\nexport function setTextContent(node, text) {\n    node.textContent = text;\n}\nexport function getTextContent(node) {\n    return node.textContent;\n}\nexport function isElement(node) {\n    return node.nodeType === 1;\n}\nexport function isText(node) {\n    return node.nodeType === 3;\n}\nexport function isComment(node) {\n    return node.nodeType === 8;\n}\n","import { isArray, isObject } from '../core/util.js';\nimport { createElement, createVNode, XMLNS, XML_NAMESPACE, XLINKNS } from './core.js';\nimport * as api from './domapi.js';\nvar colonChar = 58;\nvar xChar = 120;\nvar emptyNode = createVNode('', '');\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map = {};\n    for (var i = beginIdx; i <= endIdx; ++i) {\n        var key = children[i].key;\n        if (key !== undefined) {\n            if (process.env.NODE_ENV !== 'production') {\n                if (map[key] != null) {\n                    console.error(\"Duplicate key \" + key);\n                }\n            }\n            map[key] = i;\n        }\n    }\n    return map;\n}\nfunction sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n}\nfunction createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        var elm = (vnode.elm = createElement(tag));\n        updateAttrs(emptyNode, vnode);\n        if (isArray(children)) {\n            for (i = 0; i < children.length; ++i) {\n                var ch = children[i];\n                if (ch != null) {\n                    api.appendChild(elm, createElm(ch));\n                }\n            }\n        }\n        else if (isDef(vnode.text) && !isObject(vnode.text)) {\n            api.appendChild(elm, api.createTextNode(vnode.text));\n        }\n    }\n    else {\n        vnode.elm = api.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n}\nfunction addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            api.insertBefore(parentElm, createElm(ch), before);\n        }\n    }\n}\nfunction removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            if (isDef(ch.tag)) {\n                var parent_1 = api.parentNode(ch.elm);\n                api.removeChild(parent_1, ch.elm);\n            }\n            else {\n                api.removeChild(parentElm, ch.elm);\n            }\n        }\n    }\n}\nexport function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n    if (oldAttrs === attrs) {\n        return;\n    }\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, '');\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key === 'xmlns:xlink' || key === 'xmlns') {\n                    elm.setAttributeNS(XMLNS, key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    elm.setAttributeNS(XML_NAMESPACE, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    elm.setAttributeNS(XLINKNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nfunction updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newStartVnode)) {\n            patchVnode(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (sameVnode(oldEndVnode, newEndVnode)) {\n            patchVnode(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newEndVnode)) {\n            patchVnode(oldStartVnode, newEndVnode);\n            api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldEndVnode, newStartVnode)) {\n            patchVnode(oldEndVnode, newStartVnode);\n            api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            if (isUndef(oldKeyToIdx)) {\n                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n            }\n            idxInOld = oldKeyToIdx[newStartVnode.key];\n            if (isUndef(idxInOld)) {\n                api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n            }\n            else {\n                elmToMove = oldCh[idxInOld];\n                if (elmToMove.tag !== newStartVnode.tag) {\n                    api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n                }\n                else {\n                    patchVnode(elmToMove, newStartVnode);\n                    oldCh[idxInOld] = undefined;\n                    api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                }\n            }\n            newStartVnode = newCh[++newStartIdx];\n        }\n    }\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n        }\n        else {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n}\nfunction patchVnode(oldVnode, vnode) {\n    var elm = (vnode.elm = oldVnode.elm);\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (oldVnode === vnode) {\n        return;\n    }\n    updateAttrs(oldVnode, vnode);\n    if (isUndef(vnode.text)) {\n        if (isDef(oldCh) && isDef(ch)) {\n            if (oldCh !== ch) {\n                updateChildren(elm, oldCh, ch);\n            }\n        }\n        else if (isDef(ch)) {\n            if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n            addVnodes(elm, null, ch, 0, ch.length - 1);\n        }\n        else if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        else if (isDef(oldVnode.text)) {\n            api.setTextContent(elm, '');\n        }\n    }\n    else if (oldVnode.text !== vnode.text) {\n        if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        api.setTextContent(elm, vnode.text);\n    }\n}\nexport default function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n        patchVnode(oldVnode, vnode);\n    }\n    else {\n        var elm = oldVnode.elm;\n        var parent_2 = api.parentNode(elm);\n        createElm(vnode);\n        if (parent_2 !== null) {\n            api.insertBefore(parent_2, vnode.elm, api.nextSibling(elm));\n            removeVnodes(parent_2, [oldVnode], 0, 0);\n        }\n    }\n    return vnode;\n}\n","import { brush, setClipPath } from './graphic.js';\nimport { createElement, createVNode, vNodeToString, getCssString, createBrushScope, createSVGVNode } from './core.js';\nimport { normalizeColor, encodeBase64 } from './helper.js';\nimport { extend, keys, logError, map, retrieve2 } from '../core/util.js';\nimport patch, { updateAttrs } from './patch.js';\nimport { getSize } from '../canvas/helper.js';\nvar svgId = 0;\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.storage = storage;\n        this._opts = opts = extend({}, opts);\n        this.root = root;\n        this._id = 'zr' + svgId++;\n        this._oldVNode = createSVGVNode(opts.width, opts.height);\n        if (root && !opts.ssr) {\n            var viewport = this._viewport = document.createElement('div');\n            viewport.style.cssText = 'position:relative;overflow:hidden';\n            var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n            updateAttrs(null, this._oldVNode);\n            viewport.appendChild(svgDom);\n            root.appendChild(viewport);\n        }\n        this.resize(opts.width, opts.height);\n    }\n    SVGPainter.prototype.getType = function () {\n        return this.type;\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.refresh = function () {\n        if (this.root) {\n            var vnode = this.renderToVNode({\n                willUpdate: true\n            });\n            vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n            patch(this._oldVNode, vnode);\n            this._oldVNode = vnode;\n        }\n    };\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n        return brush(el, createBrushScope(this._id));\n    };\n    SVGPainter.prototype.renderToVNode = function (opts) {\n        opts = opts || {};\n        var list = this.storage.getDisplayList(true);\n        var bgColor = this._backgroundColor;\n        var width = this._width;\n        var height = this._height;\n        var scope = createBrushScope(this._id);\n        scope.animation = opts.animation;\n        scope.willUpdate = opts.willUpdate;\n        scope.compress = opts.compress;\n        var children = [];\n        if (bgColor && bgColor !== 'none') {\n            var _a = normalizeColor(bgColor), color = _a.color, opacity = _a.opacity;\n            this._bgVNode = createVNode('rect', 'bg', {\n                width: width,\n                height: height,\n                x: '0',\n                y: '0',\n                id: '0',\n                fill: color,\n                'fill-opacity': opacity\n            });\n            children.push(this._bgVNode);\n        }\n        else {\n            this._bgVNode = null;\n        }\n        var mainVNode = !opts.compress\n            ? (this._mainVNode = createVNode('g', 'main', {}, [])) : null;\n        this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n        mainVNode && children.push(mainVNode);\n        var defs = map(keys(scope.defs), function (id) { return scope.defs[id]; });\n        if (defs.length) {\n            children.push(createVNode('defs', 'defs', {}, defs));\n        }\n        if (opts.animation) {\n            var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, { newline: true });\n            if (animationCssStr) {\n                var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n                children.push(styleNode);\n            }\n        }\n        return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n    SVGPainter.prototype.renderToString = function (opts) {\n        opts = opts || {};\n        return vNodeToString(this.renderToVNode({\n            animation: retrieve2(opts.cssAnimation, true),\n            willUpdate: false,\n            compress: true,\n            useViewBox: retrieve2(opts.useViewBox, true)\n        }), { newline: true });\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        var bgVNode = this._bgVNode;\n        if (bgVNode && bgVNode.elm) {\n            var _a = normalizeColor(backgroundColor), color = _a.color, opacity = _a.opacity;\n            bgVNode.elm.setAttribute('fill', color);\n            if (opacity < 1) {\n                bgVNode.elm.setAttribute('fill-opacity', opacity);\n            }\n        }\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._mainVNode && this._mainVNode.elm;\n    };\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n        var listLen = list.length;\n        var clipPathsGroupsStack = [];\n        var clipPathsGroupsStackDepth = 0;\n        var currentClipPathGroup;\n        var prevClipPaths;\n        var clipGroupNodeIdx = 0;\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            if (!displayable.invisible) {\n                var clipPaths = displayable.__clipPaths;\n                var len = clipPaths && clipPaths.length || 0;\n                var prevLen = prevClipPaths && prevClipPaths.length || 0;\n                var lca = void 0;\n                for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n                    if (clipPaths && prevClipPaths\n                        && clipPaths[lca] === prevClipPaths[lca]) {\n                        break;\n                    }\n                }\n                for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n                    clipPathsGroupsStackDepth--;\n                    currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n                }\n                for (var i_2 = lca + 1; i_2 < len; i_2++) {\n                    var groupAttrs = {};\n                    setClipPath(clipPaths[i_2], groupAttrs, scope);\n                    var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n                    clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n                    currentClipPathGroup = g;\n                }\n                prevClipPaths = clipPaths;\n                var ret = brush(displayable, scope);\n                if (ret) {\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n                }\n            }\n        }\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var opts = this._opts;\n        var root = this.root;\n        var viewport = this._viewport;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        if (root && viewport) {\n            viewport.style.display = 'none';\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            viewport.style.display = '';\n        }\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            if (viewport) {\n                var viewportStyle = viewport.style;\n                viewportStyle.width = width + 'px';\n                viewportStyle.height = height + 'px';\n            }\n            var svgDom = this._svgDom;\n            if (svgDom) {\n                svgDom.setAttribute('width', width);\n                svgDom.setAttribute('height', height);\n            }\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype.dispose = function () {\n        if (this.root) {\n            this.root.innerHTML = '';\n        }\n        this._svgDom =\n            this._viewport =\n                this.storage =\n                    this._oldVNode =\n                        this._bgVNode =\n                            this._mainVNode = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        if (this._svgDom) {\n            this._svgDom.innerHTML = null;\n        }\n        this._oldVNode = null;\n    };\n    SVGPainter.prototype.toDataURL = function (base64) {\n        var str = encodeURIComponent(this.renderToString());\n        var prefix = 'data:image/svg+xml;';\n        if (base64) {\n            str = encodeBase64(str);\n            return str && prefix + 'base64,' + str;\n        }\n        return prefix + 'charset=UTF-8,' + str;\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('In SVG mode painter not support method \"' + method + '\"');\n        }\n    };\n}\nexport default SVGPainter;\n","export * from './zrender.js';\nexport * from './export.js';\nimport { registerPainter } from './zrender.js';\nimport CanvasPainter from './canvas/Painter.js';\nimport SVGPainter from './svg/Painter.js';\nregisterPainter('canvas', CanvasPainter);\nregisterPainter('svg', SVGPainter);\n","export * from './lib/all.js'","import './index.scss'\nimport * as zrender from 'zrender'\nwindow.onload = function() {\n    let operatorStatus = ''\n    // 注册菜单的点击事件\n    let _menuBtnList = document.querySelectorAll('.comp-menu-list > span')\n    for (let i of _menuBtnList) {\n        i.addEventListener('click', (item: any) => {\n            let _type = item.target.dataset.type\n            operatorStatus = _type\n        }, false)\n    }\n\n    let container = document.querySelector('#app') as HTMLElement;\n    let zr: any = zrender.init(container);\n\n    let w = zr.getWidth();\n    let h = zr.getHeight();\n\n    const canvas : any = document.querySelector('#app')\n    console.log('---canvas', canvas)\n\n    canvas.addEventListener('mouseover', (data : any) => {\n        console.log('mouseover', data)\n    }, false)\n    canvas.addEventListener('mousemove', (data : any) => {\n        // console.log('mousemove', data)\n    }, false)\n    canvas.addEventListener('mouseup', (data : any) => {\n        console.log('mouseup', data)\n    }, false)\n    canvas.addEventListener('mousedown', (data : any) => {\n        console.log('mousedown', data)\n        setPoint(data)\n    }, false)\n\n\n    function setPoint(data : any) {\n        let r = 3;\n        let circle = new zrender.Circle({\n            shape: {\n                cx: data.x,\n                cy: data.y,\n                r: r\n            },\n            style: {\n                fill: '#000000',\n                stroke: '#000000'\n            },\n            silent: true\n        });\n\n        zr.add(circle);\n    }\n\n    function setLine(data: Object) {\n        console.log(data)\n        let pointList : Array<number> = []\n    }\n    \n    // circle.animate('shape', true)\n    //     .when(5000, {\n    //         cx: w - r\n    //     })\n    //     .when(10000, {\n    //         cx: r\n    //     })\n    //     .start();\n\n    \n\n    // var container = document.querySelector('#app') as HTMLElement;\n    // var zr: any = zrender.init(container);\n\n    // 水滴\n    // var droplet = new zrender.Droplet({\n    //     shape: {\n    //         cx: 250,\n    //         cy: 50,\n    //         width: 30,\n    //         height: 30\n    //     }\n    // });\n    // zr.add(droplet)\n\n    // 线\n    // let line = new zrender.Line({\n    //     shape: {\n    //         x1: 10,\n    //         y1: 20,\n    //         x2: 200,\n    //         y2: 300,\n    //         percent: 100\n    //     }\n    // })\n    // zr.add(line)\n\n    // 添加玫瑰\n    // let rose = new zrender.Rose({\n    //     shape: {\n    //         cx: 300,\n    //         cy: 600,\n    //         r: [40, 50, 60],\n    //         k: 80,\n    //         n: 10\n    //     }\n    // })\n    // zr.add(rose)\n};\n\n\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}